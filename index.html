<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantto — Gestión Inteligente de Mantenimiento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
        }
        
        [data-theme="dark"] {
            --bg-primary: #1e1e1e;
            --bg-secondary: #121212;
            --bg-tertiary: #2d2d2d;
            --text-primary: #f1f5f9;
            --text-secondary: #a1a1aa;
            --text-muted: #a1a1aa;
            --border: #3f3f46;
            --border-light: #27272a;
        }
        
        [data-theme="dark"] .sidebar {
            background: #0a0a0a;
        }
        
        [data-theme="dark"] .card,
        [data-theme="dark"] .stat-card,
        [data-theme="dark"] .prediction-card,
        [data-theme="dark"] .team-card,
        [data-theme="dark"] .tracking-card,
        [data-theme="dark"] .asset-card,
        [data-theme="dark"] .vendor-card,
        [data-theme="dark"] .config-card {
            background: var(--bg-primary);
            border-color: var(--border);
        }
        
        [data-theme="dark"] .nav-item.active {
            background: var(--bg-tertiary);
            color: #fff;
        }
        
        [data-theme="dark"] .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border);
        }
        
        :root {
            
            --slate-100: #f1f5f9;
            --slate-600: #475569;
            
            --indigo-50: #eef2ff;
            --indigo-100: #e0e7ff;
            --indigo-300: #a5b4fc;
            --indigo-500: #6366f1;
            --indigo-600: #4f46e5;
            --indigo-700: #4338ca;
            --indigo-900: #1e1b4b;
            
            --emerald-50: #ecfdf5;
            --emerald-100: #d1fae5;
            --emerald-500: #10b981;
            --emerald-600: #059669;
            --emerald-700: #047857;
            
            --amber-50: #fffbeb;
            --amber-100: #fef3c7;
            --amber-500: #f59e0b;
            --amber-600: #d97706;
            --amber-700: #b45309;
            --amber-800: #92400e;
            
            --red-50: #fef2f2;
            --red-100: #fee2e2;
            --red-500: #ef4444;
            --red-600: #dc2626;
            
            --blue-50: #eff6ff;
            --blue-500: #3b82f6;
            --blue-600: #2563eb;
            
            --purple-50: #faf5ff;
            --purple-500: #8b5cf6;
            --purple-600: #7c3aed;
            
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -2px rgba(0,0,0,0.04);
            
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
        }

        .app { display: flex; height: 100vh; overflow: hidden; }

        /* ==================== UNIFIED UTILITIES ==================== */
        
        /* Grids */
        .grid { display: grid; gap: 24px; }
        .grid--2 { grid-template-columns: repeat(2, 1fr); }
        .grid--3 { grid-template-columns: repeat(3, 1fr); }
        .grid--4 { grid-template-columns: repeat(4, 1fr); }
        .grid--gap-sm { gap: 16px; }
        .grid--gap-lg { gap: 32px; }
        
        /* Avatars */
        .avatar { border-radius: 50%; object-fit: cover; flex-shrink: 0; }
        .avatar--xs { width: 28px; height: 28px; }
        .avatar--sm { width: 32px; height: 32px; }
        .avatar--md { width: 40px; height: 40px; }
        .avatar--lg { width: 48px; height: 48px; }
        .avatar--xl { width: 64px; height: 64px; }
        .avatar--online { position: relative; }
        .avatar--online::after { content: ''; position: absolute; bottom: 2px; right: 2px; width: 10px; height: 10px; background: var(--text-secondary); border: 2px solid white; border-radius: 50%; }
        
        /* Badges */
        .badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; font-size: 12px; font-weight: 600; border-radius: 9999px; }
        .badge--urgent { background: var(--red-500); color: #fff; }
        .badge--warning { background: var(--text-muted); color: #fff; }
        .badge--success { background: var(--text-secondary); color: #fff; }
        .badge--info { background: var(--indigo-500); color: #fff; }
        .badge--neutral { background: var(--bg-tertiary); color: var(--text-secondary); }
        .badge--outline { background: transparent; border: 1px solid currentColor; }
        .badge--dot::before { content: ''; width: 6px; height: 6px; border-radius: 50%; background: currentColor; }
        .badge--sm { padding: 2px 8px; font-size: 11px; }
        .badge--lg { padding: 6px 14px; font-size: 13px; }
        
        /* Highlight Boxes (colored stat boxes) */
        .highlight-box { padding: 16px; border-radius: var(--radius-md); text-align: center; }
        .highlight-box--success { background: var(--text-secondary); color: #fff; }
        .highlight-box--danger { background: var(--red-500); color: #fff; }
        .highlight-box--warning { background: var(--text-muted); color: #fff; }
        .highlight-box--info { background: var(--indigo-500); color: #fff; }
        .highlight-box--muted { background: var(--bg-tertiary); color: var(--text-primary); }
        .highlight-box__label { font-size: 12px; opacity: 0.85; margin-bottom: 4px; }
        .highlight-box__value { font-size: 24px; font-weight: 700; }
        .highlight-box__value--lg { font-size: 28px; font-weight: 800; }
        
        /* Section Headers */
        .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .section-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .section-subtitle { font-size: 13px; color: var(--text-secondary); }
        
        /* Timeline Base */
        .timeline { display: flex; flex-direction: column; }
        .timeline__item { display: flex; gap: 12px; align-items: flex-start; padding: 12px 0; border-bottom: 1px solid var(--border-light); }
        .timeline__item:last-child { border-bottom: none; }
        .timeline__dot { width: 8px; height: 8px; border-radius: 50%; background: var(--indigo-500); margin-top: 6px; flex-shrink: 0; }
        .timeline__dot--urgent { background: var(--red-500); }
        .timeline__dot--warning { background: var(--text-muted); }
        .timeline__dot--success { background: var(--text-secondary); }
        .timeline__content { flex: 1; }
        .timeline__title { font-size: 14px; font-weight: 500; color: var(--text-primary); }
        .timeline__meta { font-size: 12px; color: var(--text-secondary); }
        
        /* Tabs/Filters (unified) */
        .tabs { display: flex; gap: 4px; background: var(--bg-secondary); padding: 4px; border-radius: var(--radius-md); width: fit-content; }
        .tabs--outline { background: transparent; padding: 0; gap: 8px; }
        .tabs__item { padding: 10px 20px; font-size: 14px; font-weight: 500; color: var(--text-secondary); background: none; border: none; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.15s; }
        .tabs__item:hover { color: var(--text-primary); }
        .tabs__item.active { background: var(--bg-primary); color: var(--indigo-600); box-shadow: var(--shadow-sm); }
        .tabs--outline .tabs__item { border: 1px solid var(--border); padding: 8px 14px; font-size: 13px; border-radius: 9999px; }
        .tabs--outline .tabs__item:hover { border-color: var(--text-muted); }
        .tabs--outline .tabs__item.active { background: var(--indigo-600); color: #fff; border-color: var(--indigo-600); }
        
        /* Text utilities */
        .text-xs { font-size: 11px; }
        .text-sm { font-size: 12px; }
        .text-base { font-size: 14px; }
        .text-lg { font-size: 16px; }
        .text-xl { font-size: 18px; }
        .text-2xl { font-size: 24px; }
        .text-3xl { font-size: 32px; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .text-muted { color: var(--text-muted); }
        .text-secondary { color: var(--text-secondary); }
        .text-primary { color: var(--text-primary); }
        
        /* Spacing */
        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }
        .gap-1 { gap: 4px; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        
        /* Flex utilities */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .flex-1 { flex: 1; }
        .shrink-0 { flex-shrink: 0; }

        /* ==================== SIDEBAR ==================== */
        .sidebar {
            width: 260px;
            background: var(--indigo-900);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .logo { display: flex; align-items: center; gap: 12px; }

        .logo-icon {
            width: 36px; height: 36px;
            background: var(--indigo-600);
            border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }

        .logo-icon svg { width: 20px; height: 20px; color: white; }

        .logo-text h1 { font-size: 18px; font-weight: 700; color: #fff; letter-spacing: -0.3px; }
        .logo-text span { font-size: 12px; color: rgba(255,255,255,0.5); }

        .nav { padding: 16px 12px; flex: 1; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none; }
        .nav::-webkit-scrollbar { display: none; }
        .nav-section { margin-bottom: 24px; }
        .nav-section-label {
            font-size: 11px; font-weight: 600; color: rgba(255,255,255,0.4);
            text-transform: uppercase; letter-spacing: 0.5px;
            padding: 0 12px; margin-bottom: 8px;
        }

        .nav-item {
            display: flex; align-items: center; gap: 12px;
            padding: 10px 12px; color: rgba(255,255,255,0.7);
            font-size: 14px; font-weight: 500; cursor: pointer;
            border-radius: var(--radius-md); transition: all 0.15s ease; margin-bottom: 2px;
        }

        .nav-item:hover { background: rgba(255,255,255,0.08); color: #fff; }
        .nav-item.active { background: #fff; color: var(--indigo-700); font-weight: 600; }
        .nav-item svg { width: 20px; height: 20px; flex-shrink: 0; }

        .nav-badge {
            margin-left: auto; background: var(--red-500); color: #fff;
            font-size: 11px; font-weight: 600; padding: 2px 8px; border-radius: 10px;
        }

        .nav-item.active .nav-badge { background: var(--red-500); }

        .nav-item-new {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        .nav-item-new:hover { background: rgba(139, 92, 246, 0.3); }

        .sidebar-footer { padding: 16px; border-top: 1px solid rgba(255,255,255,0.08); display: flex; align-items: center; gap: 12px; }

        .user-card {
            display: flex; align-items: center; gap: 12px;
            padding: 8px; border-radius: var(--radius-md); cursor: pointer;
        }
        .user-card:hover { background: rgba(255,255,255,0.08); }

        .user-avatar {
            width: 36px; height: 36px; background: var(--indigo-600);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: #fff; font-weight: 600; font-size: 14px;
        }

        .user-name { font-size: 13px; font-weight: 600; color: #fff; }
        .user-role { font-size: 12px; color: rgba(255,255,255,0.5); }

        /* ==================== MAIN ==================== */
        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

        .topbar {
            height: 64px; background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 32px; flex-shrink: 0;
        }

        .page-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }

        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 10px 16px; font-size: 14px; font-weight: 600;
            border-radius: var(--radius-md); cursor: pointer;
            transition: all 0.15s ease; border: none; font-family: inherit;
        }
        .btn svg { width: 18px; height: 18px; }
        .btn-primary { background: var(--indigo-600); color: #fff; }
        .btn-primary:hover { background: var(--indigo-700); }
        .btn-secondary { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { background: var(--bg-secondary); }

        .content { flex: 1; overflow-y: auto; padding: 32px; }

        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

        /* ==================== STATS ==================== */
        .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }

        .stat-card { padding: 20px 24px; }

        .stat-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
        .stat-label { font-size: 13px; font-weight: 500; color: var(--text-secondary); }

        .stat-icon {
            width: 40px; height: 40px; border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }
        .stat-icon svg { width: 20px; height: 20px; }
        .stat-icon.indigo, .stat-icon.emerald, .stat-icon.amber, .stat-icon.red { background: var(--bg-tertiary); color: var(--text-secondary); }

        .stat-value { font-size: 32px; font-weight: 700; color: var(--text-primary); letter-spacing: -1px; line-height: 1; margin-bottom: 8px; }
        .stat-trend { display: inline-flex; align-items: center; gap: 4px; font-size: 12px; font-weight: 600; }
        .stat-trend.positive { color: var(--text-secondary); }
        .stat-trend.negative { color: var(--red-500); }

        /* ==================== CARDS (Unified) ==================== */
        .card, .stat-card, .team-card, .tracking-card, .prediction-card, .asset-card, .vendor-card, .config-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
        }

        .card { overflow: hidden; }

        .card-header, .config-card-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px 24px; border-bottom: 1px solid var(--border-light);
        }

        .card-title, .config-card-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .card-body, .config-card-body { padding: 20px 24px; }

        /* ==================== FLOOR MAP ==================== */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 380px; gap: 24px; }

        .legend { display: flex; gap: 20px; }
        .legend-item { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-secondary); }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
        .legend-dot.urgent { background: var(--red-500); }
        .legend-dot.pending { background: var(--text-muted); }
        .legend-dot.resolved { background: var(--text-secondary); }
        .legend-dot.staff { background: var(--indigo-500); }

        .floor-list { }

        .floor-row {
            display: flex; align-items: center; gap: 12px;
            padding: 4px 0; cursor: pointer; border-radius: var(--radius-sm); transition: background 0.1s;
        }
        .floor-row:hover { background: var(--bg-secondary); }
        .floor-row.selected { background: var(--bg-tertiary); }

        .floor-label { width: 36px; font-size: 13px; font-weight: 600; color: var(--text-secondary); text-align: right; }

        .floor-bar-container { flex: 1; position: relative; }
        .floor-bar { height: 24px; border-radius: 4px; position: relative; }
        .floor-bar.level-0 { background: var(--bg-secondary); }
        .floor-bar.level-1 { background: var(--bg-tertiary); }
        .floor-bar.level-2 { background: var(--bg-tertiary); }
        .floor-bar.level-3 { background: #fed7aa; }
        .floor-bar.level-4 { background: var(--bg-tertiary); }

        .floor-summary { display: flex; gap: 4px; width: 80px; justify-content: flex-end; align-items: center; }
        .summary-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
        .summary-dot.urgent { background: var(--red-500); }
        .summary-dot.pending { background: var(--text-muted); }
        .summary-dot.resolved { background: var(--text-secondary); }
        .summary-dot.staff { background: var(--indigo-500); }

        /* Detail Panel */
        .floor-detail-panel {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); height: fit-content;
        }

        .detail-header { padding: 24px; border-bottom: 1px solid var(--border-light); }
        .detail-floor-num { font-size: 28px; font-weight: 800; color: var(--text-primary); letter-spacing: -1px; }
        .detail-subtitle { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }

        .detail-stats { padding: 20px 24px; border-bottom: 1px solid var(--border-light); }
        .detail-stat-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; }
        .detail-stat-label { font-size: 14px; color: var(--text-secondary); }
        .detail-stat-value { font-size: 14px; font-weight: 600; }
        .detail-stat-value.urgent { color: var(--text-primary); }
        .detail-stat-value.pending { color: var(--text-primary); }
        .detail-stat-value.resolved { color: var(--text-primary); }

        .detail-incidents { padding: 20px 24px; }
        .detail-section-title {
            font-size: 12px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;
        }

        .incident-card {
            padding: 14px 16px; background: var(--bg-secondary);
            border-radius: var(--radius-md); margin-bottom: 10px; position: relative;
        }
        .incident-card::before { content: ''; position: absolute; left: 16px; top: 50%; transform: translateY(-50%); width: 8px; height: 8px; border-radius: 50%; }
        .incident-card.urgent::before { background: var(--red-500); }
        .incident-card.pending::before { background: var(--text-muted); }
        .incident-card.resolved::before { background: var(--text-secondary); }
        .incident-card { padding-left: 36px; }

        .incident-title { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .incident-status { font-size: 12px; color: var(--text-secondary); }

        .empty-state { text-align: center; padding: 60px 24px; color: var(--text-muted); }
        .empty-state svg { width: 48px; height: 48px; margin-bottom: 16px; opacity: 0.4; }

        .ai-insight {
            margin: 16px 24px; padding: 14px 16px;
            background: var(--indigo-600);
            border-radius: var(--radius-md);
        }
        .ai-insight-header {
            display: flex; align-items: center; gap: 8px;
            font-size: 11px; font-weight: 700; color: rgba(255,255,255,0.85);
            text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;
        }
        .ai-insight-text { font-size: 13px; color: #fff; font-weight: 500; }

        /* ==================== ORDERS ==================== */
        .filters-bar { display: flex; gap: 8px; margin-bottom: 20px; }

        .filter-btn {
            padding: 8px 16px; font-size: 13px; font-weight: 500;
            color: var(--text-secondary); background: var(--bg-primary);
            border: 1px solid var(--border); border-radius: var(--radius-md);
            cursor: pointer; transition: all 0.15s;
        }
        .filter-btn:hover { border-color: var(--text-muted); }
        .filter-btn.active { background: var(--indigo-600); color: #fff; border-color: var(--indigo-600); }

        .orders-table {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); overflow: hidden;
        }

        .table-header {
            display: grid; grid-template-columns: 1fr 160px 140px 120px 100px;
            gap: 16px; padding: 14px 24px; background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            font-size: 12px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px;
        }

        .table-row {
            display: grid; grid-template-columns: 1fr 160px 140px 120px 100px;
            gap: 16px; padding: 16px 24px; border-bottom: 1px solid var(--border-light);
            align-items: center; transition: background 0.1s;
        }
        .table-row:hover { background: var(--bg-secondary); }
        .table-row:last-child { border-bottom: none; }

        .order-title { font-weight: 600; color: var(--text-primary); }
        .order-location { font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

        .order-assignee { display: flex; align-items: center; gap: 10px; }
        .assignee-avatar {
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 600;
        }

        .status-badge {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;
        }
        .status-badge.urgent { background: var(--red-500); color: #fff; }
        .status-badge.pending { background: #cbd5e1; color: #334155; }
        .status-badge.in-progress { background: #64748b; color: #fff; }
        .status-badge.resolved { background: #e2e8f0; color: #64748b; }

        .status-dot { width: 8px; height: 8px; border-radius: 50%; }
        .status-badge.urgent .status-dot { background: #fff; }
        .status-badge.pending .status-dot { background: #334155; }
        .status-badge.in-progress .status-dot { background: #fff; }
        .status-badge.resolved .status-dot { background: #64748b; }

        .priority-indicator { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 6px; }
        .priority-indicator.high { background: var(--red-500); }
        .priority-indicator.medium { background: var(--text-muted); }
        .priority-indicator.low { background: var(--text-secondary); }

        .time-ago { font-size: 13px; color: var(--text-secondary); }

        /* ==================== TEAM ==================== */
        .team-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .team-stats { display: flex; gap: 32px; }
        .team-stat-value { font-size: 28px; font-weight: 700; color: var(--text-primary); }
        .team-stat-label { font-size: 13px; color: var(--text-secondary); }

        .team-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }

        .team-card { padding: 24px; }

        .team-card-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }

        .team-avatar {
            width: 52px; height: 52px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 18px; position: relative;
        }
        .team-avatar.online::after {
            content: ''; position: absolute; bottom: 2px; right: 2px;
            width: 14px; height: 14px; background: var(--text-secondary);
            border: 3px solid var(--bg-primary); border-radius: 50%;
        }

        .team-name { font-size: 16px; font-weight: 600; color: var(--text-primary); }
        .team-role { font-size: 13px; color: var(--text-secondary); }
        .team-location {
            display: flex; align-items: center; gap: 6px;
            font-size: 12px; color: var(--indigo-600); font-weight: 500; margin-top: 4px;
        }

        .team-metrics {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
            padding-top: 20px; border-top: 1px solid var(--border-light);
        }
        .team-metric { text-align: center; }
        .team-metric-value { font-size: 20px; font-weight: 700; color: var(--text-primary); }
        .team-metric-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px; }

        /* ==================== WHATSAPP AI ==================== */
        .whatsapp-demo { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }

        .phone-mockup {
            background: #075e54; border-radius: 32px; padding: 12px;
            box-shadow: var(--shadow-lg); max-width: 320px; margin: 0 auto;
        }

        .phone-screen { background: #ece5dd; border-radius: 24px; overflow: hidden; }

        .phone-header {
            background: #075e54; color: white; padding: 12px 16px;
            display: flex; align-items: center; gap: 12px;
        }
        .phone-header-avatar { width: 36px; height: 36px; background: #128c7e; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .phone-header-name { font-weight: 600; font-size: 15px; }
        .phone-header-status { font-size: 12px; opacity: 0.8; }

        .chat-messages { padding: 16px; min-height: 300px; }

        .chat-bubble {
            max-width: 85%; padding: 10px 14px; border-radius: 12px;
            margin-bottom: 12px; font-size: 14px; position: relative;
        }
        .chat-bubble.sent { background: #dcf8c6; margin-left: auto; border-bottom-right-radius: 4px; }
        .chat-bubble.received { background: white; margin-right: auto; border-bottom-left-radius: 4px; }
        .chat-time { font-size: 11px; color: #667781; text-align: right; margin-top: 4px; }

        .voice-message {
            display: flex; align-items: center; gap: 12px; padding: 8px 12px;
            background: #dcf8c6; border-radius: 12px; max-width: 85%; margin-left: auto; margin-bottom: 12px;
        }
        .voice-play { width: 32px; height: 32px; background: #075e54; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .voice-play svg { color: white; width: 14px; height: 14px; }
        .voice-waves { flex: 1; height: 24px; display: flex; align-items: center; gap: 2px; }
        .voice-bar { width: 3px; background: #075e54; border-radius: 2px; animation: wave 1s ease-in-out infinite; }
        .voice-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
        .voice-bar:nth-child(2) { height: 16px; animation-delay: 0.1s; }
        .voice-bar:nth-child(3) { height: 12px; animation-delay: 0.2s; }
        .voice-bar:nth-child(4) { height: 20px; animation-delay: 0.3s; }
        .voice-bar:nth-child(5) { height: 14px; animation-delay: 0.4s; }
        .voice-bar:nth-child(6) { height: 18px; animation-delay: 0.5s; }
        .voice-bar:nth-child(7) { height: 10px; animation-delay: 0.6s; }
        .voice-bar:nth-child(8) { height: 22px; animation-delay: 0.7s; }
        .voice-bar:nth-child(9) { height: 14px; animation-delay: 0.8s; }
        .voice-bar:nth-child(10) { height: 8px; animation-delay: 0.9s; }
        @keyframes wave { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(0.5); } }
        .voice-duration { font-size: 12px; color: #667781; }

        .ai-process { padding: 32px; }
        .ai-process h3 { font-size: 20px; font-weight: 700; margin-bottom: 24px; color: var(--text-primary); }

        .process-step {
            display: flex; gap: 16px; margin-bottom: 24px; padding: 20px;
            background: var(--bg-secondary); border-radius: var(--radius-lg);
        }
        .step-number {
            width: 32px; height: 32px; background: var(--indigo-600); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 14px; flex-shrink: 0;
        }
        .step-content h4 { font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .step-content p { font-size: 13px; color: var(--text-secondary); }
        .step-result {
            margin-top: 8px; padding: 8px 12px; background: var(--indigo-50);
            border-radius: var(--radius-sm); font-size: 13px; color: var(--indigo-700); font-weight: 500;
        }

        .whatsapp-tagline {
            text-align: center; padding: 32px;
            font-size: 24px; font-weight: 700; color: var(--text-primary);
        }
        .whatsapp-tagline span { color: #25d366; }

        /* ==================== LIVE TRACKING ==================== */
        .tracking-grid { display: grid; grid-template-columns: 1fr 400px; gap: 24px; }

        .tracking-card {
            padding: 24px;
        }

        .tracking-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
        .tracking-avatar {
            width: 64px; height: 64px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 24px;
        }
        .tracking-tech-name { font-size: 20px; font-weight: 700; color: var(--text-primary); }
        .tracking-tech-role { font-size: 14px; color: var(--text-secondary); }
        .tracking-eta {
            margin-left: auto; padding: 8px 16px;
            background: var(--bg-tertiary); color: var(--text-secondary);
            border-radius: var(--radius-md); font-weight: 600;
        }

        .tracking-progress { margin-bottom: 24px; }
        .progress-steps { display: flex; justify-content: space-between; position: relative; }
        .progress-steps::before {
            content: ''; position: absolute; top: 15px; left: 40px; right: 40px;
            height: 4px; background: var(--bg-tertiary); z-index: 0;
        }
        .progress-step { text-align: center; position: relative; z-index: 1; flex: 1; }
        .step-icon {
            width: 32px; height: 32px; border-radius: 50%; margin: 0 auto 8px;
            display: flex; align-items: center; justify-content: center;
            background: var(--bg-tertiary); color: var(--text-muted);
        }
        .step-icon svg { width: 16px; height: 16px; }
        .progress-step.completed .step-icon { background: var(--text-secondary); color: white; }
        .progress-step.current .step-icon {
            background: var(--indigo-600); color: white;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); } 50% { box-shadow: 0 0 0 8px rgba(79, 70, 229, 0); } }
        .step-label { font-size: 12px; color: var(--text-secondary); }
        .progress-step.completed .step-label, .progress-step.current .step-label { color: var(--text-primary); font-weight: 500; }

        .tracking-order {
            padding: 20px; background: var(--bg-secondary); border-radius: var(--radius-lg);
        }
        .tracking-order-title { font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .tracking-order-location { font-size: 13px; color: var(--text-secondary); }

        /* Building Visualization */
        .building-visualization {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .building-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-align: center;
        }

        .building-cross-section {
            flex: 1;
            position: relative;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .building-floors {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .building-floor {
            flex: 1;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            padding: 0 12px;
            font-size: 11px;
            color: var(--text-muted);
            position: relative;
            transition: background 0.2s;
        }

        .building-floor:last-child {
            border-bottom: none;
        }

        .building-floor.highlighted {
            background: var(--indigo-50);
        }

        .building-floor-label {
            width: 32px;
        }

        .building-floor-bar {
            flex: 1;
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            margin: 0 8px;
        }

        .building-marker {
            position: absolute;
            width: 36px;
            height: 36px;
            background: var(--indigo-600);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 12px;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
            transition: top 0.5s ease, left 0.5s ease;
            z-index: 10;
            right: 20px;
        }

        .building-marker::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--indigo-600);
            border-radius: 50%;
            animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
        }

        @keyframes ping {
            75%, 100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        .building-legend {
            margin-top: 16px;
            display: flex;
            justify-content: center;
            gap: 16px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .building-legend span {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        @keyframes bounce { 0%, 100% { transform: rotate(-45deg) translateY(0); } 50% { transform: rotate(-45deg) translateY(-10px); } }

        /* ==================== PREDICTIVE AI ==================== */
        .predictions-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 24px; }

        .prediction-card { overflow: hidden; }

        .prediction-header {
            padding: 20px 24px; border-bottom: 1px solid var(--border-light);
            display: flex; align-items: center; gap: 16px;
        }
        .prediction-icon {
            width: 48px; height: 48px; border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }
        .prediction-icon.warning { background: var(--bg-tertiary); color: var(--text-secondary); }
        .prediction-icon.critical { background: var(--red-500); color: #fff; }
        .prediction-icon svg { width: 24px; height: 24px; }

        .prediction-title { font-weight: 600; color: var(--text-primary); }
        .prediction-subtitle { font-size: 13px; color: var(--text-secondary); }

        .prediction-badge {
            margin-left: auto; padding: 6px 12px; border-radius: 20px;
            font-size: 13px; font-weight: 700;
        }
        .prediction-badge.high { background: var(--red-500); color: #fff; }
        .prediction-badge.medium { background: var(--bg-tertiary); color: var(--text-secondary); }

        .prediction-body { padding: 24px; }

        .prediction-reason {
            padding: 12px 16px; background: var(--bg-secondary);
            border-radius: var(--radius-md); font-size: 13px; color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .cost-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
        .cost-box {
            padding: 16px; border-radius: var(--radius-md); text-align: center;
        }
        .cost-box.preventive { background: var(--bg-tertiary); }
        .cost-box.failure { background: var(--red-500); }
        .cost-label { font-size: 12px; margin-bottom: 4px; }
        .cost-value { font-size: 24px; font-weight: 700; }
        .cost-box.preventive .cost-label { color: var(--text-secondary); }
        .cost-box.preventive .cost-value { color: var(--text-primary); }
        .cost-box.failure .cost-label { color: rgba(255,255,255,0.85); }
        .cost-box.failure .cost-value { color: #fff; }

        .savings-box {
            padding: 16px; background: var(--indigo-600);
            border-radius: var(--radius-md); text-align: center;
        }
        .savings-label { font-size: 13px; color: rgba(255,255,255,0.85); margin-bottom: 4px; }
        .savings-value { font-size: 28px; font-weight: 800; color: #fff; }

        .prediction-footer { padding: 16px 24px; border-top: 1px solid var(--border-light); }

        /* ==================== COMPLIANCE ==================== */
        .compliance-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .compliance-stats { display: flex; gap: 32px; }
        .compliance-stat {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 20px; background: var(--bg-primary);
            border-radius: var(--radius-md); box-shadow: var(--shadow-sm);
        }
        .compliance-stat-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .compliance-stat-icon.urgent { background: var(--red-500); color: #fff; }
        .compliance-stat-icon.ok { background: var(--bg-tertiary); color: var(--text-secondary); }
        .compliance-stat-value { font-size: 24px; font-weight: 700; }
        .compliance-stat-label { font-size: 12px; color: var(--text-secondary); }

        .compliance-timeline {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            padding: 24px;
        }

        .timeline-item {
            display: flex; gap: 16px; padding: 16px 0;
            border-bottom: 1px solid var(--border-light);
        }
        .timeline-item:last-child { border-bottom: none; }

        .timeline-indicator {
            width: 12px; height: 12px; border-radius: 50%; margin-top: 4px;
            box-shadow: 0 0 0 4px rgba(0,0,0,0.05);
        }
        .timeline-indicator.urgent { background: var(--red-500); box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2); }
        .timeline-indicator.warning { background: var(--text-muted); box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2); }
        .timeline-indicator.ok { background: var(--text-secondary); box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2); }

        .timeline-content { flex: 1; }
        .timeline-title { font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
        .timeline-date { font-size: 13px; color: var(--text-secondary); }

        .timeline-days {
            padding: 6px 12px; border-radius: var(--radius-sm);
            font-size: 13px; font-weight: 600; white-space: nowrap;
        }
        .timeline-days.urgent { background: var(--red-500); color: #fff; }
        .timeline-days.warning { background: var(--bg-tertiary); color: var(--text-secondary); }
        .timeline-days.ok { background: var(--bg-tertiary); color: var(--text-secondary); }

        .compliance-banner {
            margin-top: 24px; padding: 20px 24px;
            background: var(--indigo-600);
            border-radius: var(--radius-lg);
            text-align: center;
        }
        .compliance-banner-text { font-size: 16px; font-weight: 600; color: #fff; }

        /* ==================== QR ASSETS ==================== */
        .assets-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }

        .asset-card { padding: 24px; text-align: center; }

        .qr-code {
            width: 120px; height: 120px; margin: 0 auto 16px;
            background: white; border-radius: var(--radius-md);
            padding: 8px; box-shadow: inset 0 0 0 1px var(--border);
            display: flex; align-items: center; justify-content: center;
        }
        .qr-pattern {
            width: 100%; height: 100%;
            background: 
                linear-gradient(90deg, #000 20%, transparent 20%, transparent 80%, #000 80%),
                linear-gradient(#000 20%, transparent 20%, transparent 80%, #000 80%),
                linear-gradient(90deg, transparent 33%, #000 33%, #000 67%, transparent 67%),
                linear-gradient(transparent 33%, #000 33%, #000 67%, transparent 67%);
            background-size: 10px 10px, 10px 10px, 30px 30px, 30px 30px;
            background-position: 0 0, 0 0, 5px 5px, 5px 5px;
        }

        .asset-name { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .asset-location { font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; }
        .asset-scan-text { font-size: 12px; color: var(--indigo-600); font-weight: 500; }

        .asset-demo-section { margin-top: 32px; }
        .asset-demo-section h3 { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: var(--text-primary); }

        .demo-panels { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .demo-panel {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            overflow: hidden;
        }
        .demo-panel-header {
            padding: 16px 20px; background: var(--bg-secondary);
            font-weight: 600; color: var(--text-primary);
            border-bottom: 1px solid var(--border-light);
        }
        .demo-panel-body { padding: 20px; }

        .mock-form-field {
            margin-bottom: 12px;
        }
        .mock-form-label { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
        .mock-form-value {
            padding: 10px 12px; background: var(--bg-secondary);
            border-radius: var(--radius-sm); font-size: 14px; color: var(--text-primary);
        }

        .history-item {
            display: flex; gap: 12px; padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }
        .history-item:last-child { border-bottom: none; }
        .history-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--indigo-500); margin-top: 6px; }
        .history-text { font-size: 13px; color: var(--text-primary); }
        .history-date { font-size: 12px; color: var(--text-secondary); }

        /* ==================== VENDORS ==================== */
        .vendors-section { margin-bottom: 32px; }
        .vendors-section h3 { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: var(--text-primary); }

        .vendors-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }

        .vendor-card {
            padding: 20px; display: flex; gap: 16px; align-items: center;
            cursor: pointer; transition: all 0.15s;
        }
        .vendor-card:hover { border-color: var(--indigo-300); box-shadow: var(--shadow-md); }
        .vendor-card.selected { border-color: var(--indigo-600); background: var(--bg-secondary); }

        .vendor-logo {
            width: 48px; height: 48px; border-radius: var(--radius-md);
            background: var(--bg-secondary); display: flex; align-items: center; justify-content: center;
            font-weight: 700; color: var(--text-secondary);
        }

        .vendor-name { font-weight: 600; color: var(--text-primary); }
        .vendor-rating { display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--text-primary); margin: 4px 0; }
        .vendor-meta { font-size: 12px; color: var(--text-secondary); }
        .vendor-price { margin-left: auto; font-weight: 600; color: var(--text-primary); }

        .quotes-comparison {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            overflow: hidden;
        }

        .quotes-header {
            padding: 20px 24px; background: var(--bg-secondary);
            font-weight: 600; color: var(--text-primary);
            border-bottom: 1px solid var(--border-light);
            display: flex; justify-content: space-between; align-items: center;
        }

        .quotes-table { width: 100%; }
        .quotes-table th, .quotes-table td { padding: 16px 24px; text-align: left; }
        .quotes-table th { font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 600; }
        .quotes-table td { border-top: 1px solid var(--border-light); }
        .quotes-table tr:hover td { background: var(--bg-secondary); }

        .quote-vendor { display: flex; align-items: center; gap: 12px; }
        .quote-best { background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }

        /* ==================== MODAL ==================== */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px); display: none;
            align-items: center; justify-content: center; z-index: 1000; padding: 24px;
        }
        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--bg-primary); border-radius: var(--radius-xl);
            width: 100%; max-width: 520px; box-shadow: var(--shadow-lg);
            animation: modalIn 0.2s ease;
        }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        .modal-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 24px; border-bottom: 1px solid var(--border);
        }
        .modal-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }

        .modal-close {
            width: 36px; height: 36px; border-radius: var(--radius-md);
            border: none; background: transparent; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            color: var(--text-muted); transition: all 0.15s;
        }
        .modal-close:hover { background: var(--bg-secondary); color: var(--text-primary); }

        .modal-body { padding: 24px; }

        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 13px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 12px 14px; font-size: 14px;
            border: 1px solid var(--border); border-radius: var(--radius-md);
            background: var(--bg-primary); color: var(--text-primary);
            font-family: inherit; transition: border-color 0.15s, box-shadow 0.15s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none; border-color: var(--indigo-500);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        .form-textarea { min-height: 100px; resize: vertical; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

        .modal-footer {
            display: flex; justify-content: flex-end; gap: 12px;
            padding: 20px 24px; border-top: 1px solid var(--border);
            background: var(--bg-secondary); border-radius: 0 0 var(--radius-xl) var(--radius-xl);
        }

        /* ==================== CONFIG ==================== */
        .config-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }

        .config-card-body { padding: 8px 0; } /* Override default card-body padding */

        .config-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 24px; }
        .config-label { font-size: 14px; color: var(--text-secondary); }
        .config-value { font-size: 14px; font-weight: 500; color: var(--text-primary); }

        .toggle {
            width: 44px; height: 24px; background: var(--bg-tertiary);
            border-radius: 12px; position: relative; cursor: pointer; transition: background 0.2s;
        }
        .toggle.active { background: var(--text-secondary); }
        .toggle::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: #fff; border-radius: 50%; top: 2px; left: 2px;
            transition: transform 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .toggle.active::after { transform: translateX(20px); }

        /* ==================== REPORTS ==================== */
        /* Reports - Dashboard Style */
        .report-stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }
        .report-section-title { font-size: 15px; font-weight: 600; color: var(--text-primary); margin-bottom: 16px; }

        .category-bar { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .category-label { width: 120px; font-size: 13px; color: var(--text-secondary); }
        .category-track { flex: 1; height: 24px; background: var(--bg-secondary); border-radius: 4px; overflow: hidden; }
        .category-fill { height: 100%; background: var(--indigo-500); border-radius: 4px; }
        .category-value { width: 50px; text-align: right; font-size: 14px; font-weight: 600; color: var(--text-primary); }

        /* Section Internal Tabs */
        .section-tabs { display: flex; gap: 4px; margin-bottom: 24px; background: var(--bg-secondary); padding: 4px; border-radius: var(--radius-md); width: fit-content; }
        .section-tab { padding: 10px 20px; font-size: 14px; font-weight: 500; color: var(--text-secondary); background: none; border: none; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.15s; }
        .section-tab:hover { color: var(--text-primary); }
        .section-tab.active { background: var(--bg-primary); color: var(--indigo-600); box-shadow: var(--shadow-sm); }
        .team-tab-content { display: none; }
        .team-tab-content.active { display: block; }

        /* Enhanced Reports */
        .report-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .report-filters { display: flex; gap: 12px; align-items: center; }
        .report-date-picker { display: flex; align-items: center; gap: 8px; padding: 10px 16px; background: var(--bg-primary); border: 1px solid var(--border); border-radius: var(--radius-md); font-size: 14px; color: var(--text-primary); cursor: pointer; }
        .report-date-picker:hover { border-color: var(--indigo-300); }
        .report-date-picker svg { color: var(--text-muted); }
        .report-export { display: flex; align-items: center; gap: 8px; padding: 10px 20px; background: var(--indigo-600); color: white; border: none; border-radius: var(--radius-md); font-size: 14px; font-weight: 500; cursor: pointer; }
        .report-export:hover { background: var(--indigo-700); }
        .stat-trend { display: flex; align-items: center; gap: 4px; font-size: 12px; margin-top: 4px; }
        .stat-trend.up { color: var(--text-secondary); }
        .stat-trend.down { color: var(--text-secondary); }
        .report-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 24px; }
        .report-section-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); padding: 24px; }
        .tech-table { width: 100%; border-collapse: collapse; }
        .tech-table th { text-align: left; font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; padding: 12px 8px; border-bottom: 1px solid var(--border-light); }
        .tech-table td { padding: 12px 8px; font-size: 14px; border-bottom: 1px solid var(--border-light); }
        .tech-table tr:last-child td { border-bottom: none; }
        .tech-name { display: flex; align-items: center; gap: 10px; }
        .tech-avatar-sm { width: 32px; height: 32px; border-radius: 50%; background: var(--indigo-100); color: var(--indigo-600); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; }
        .perf-bar { width: 60px; height: 6px; background: var(--bg-secondary); border-radius: 3px; overflow: hidden; }
        .perf-fill { height: 100%; background: var(--text-secondary); border-radius: 3px; }
        .perf-fill.medium { background: var(--text-muted); }
        .perf-fill.low { background: var(--red-500); }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            border: 1px solid var(--border);
            animation: toastIn 0.3s ease;
            min-width: 320px;
        }

        .toast.success { border-left: 4px solid var(--text-secondary); }
        .toast.error { border-left: 4px solid var(--red-500); }
        .toast.warning { border-left: 4px solid var(--text-muted); }

        .toast-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .toast.success .toast-icon { background: var(--bg-tertiary); color: var(--text-secondary); }
        .toast.error .toast-icon { background: var(--red-500); color: #fff; }
        .toast.warning .toast-icon { background: var(--bg-tertiary); color: var(--text-secondary); }

        .toast-icon svg { width: 14px; height: 14px; }

        .toast-content { flex: 1; }
        .toast-title { font-weight: 600; color: var(--text-primary); font-size: 14px; }
        .toast-message { font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
        }
        .toast-close:hover { color: var(--text-primary); }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes toastOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(100%); }
        }

        .toast.removing { animation: toastOut 0.3s ease forwards; }

        /* Order Detail Drawer */
        .drawer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .drawer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .drawer {
            position: fixed;
            top: 0;
            right: 0;
            width: 480px;
            height: 100vh;
            background: var(--bg-primary);
            box-shadow: -10px 0 40px rgba(0,0,0,0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            z-index: 1001;
        }

        .drawer-overlay.active .drawer {
            transform: translateX(0);
        }

        .drawer-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .drawer-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .drawer-close {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .drawer-close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .drawer-section {
            margin-bottom: 24px;
        }

        .drawer-section-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .drawer-info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .drawer-info-row:last-child {
            border-bottom: none;
        }

        .drawer-info-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .drawer-info-value {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .drawer-timeline {
            position: relative;
            padding-left: 24px;
        }

        .drawer-timeline::before {
            content: '';
            position: absolute;
            left: 5px;
            top: 8px;
            bottom: 8px;
            width: 2px;
            background: var(--border);
        }

        .timeline-event {
            position: relative;
            padding-bottom: 16px;
        }

        .timeline-event:last-child {
            padding-bottom: 0;
        }

        .timeline-event::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-primary);
            border: 2px solid var(--indigo-500);
        }

        .timeline-event.completed::before {
            background: var(--text-secondary);
            border-color: var(--text-secondary);
        }

        .timeline-event-title {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .timeline-event-time {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .drawer-footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
        }

        .table-row { cursor: pointer; }

        /* Floor Dot Tooltips */
        .floor-dot {
            position: absolute;
            cursor: pointer;
        }

        .floor-dot-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.15s ease;
            z-index: 100;
            pointer-events: none;
        }

        .floor-dot-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--text-primary);
        }

        .floor-dot:hover .floor-dot-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Activity Feed */
        .activity-feed {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .activity-text {
            font-size: 14px;
            color: var(--text-primary);
        }

        .activity-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Urgent Orders Mini List */
        .urgent-order-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 24px;
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: background 0.1s;
        }

        .urgent-order-item:hover {
            background: var(--bg-secondary);
        }

        .urgent-order-item:last-child {
            border-bottom: none;
        }

        .urgent-order-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--red-500);
            flex-shrink: 0;
        }

        .urgent-order-info {
            flex: 1;
            min-width: 0;
        }

        .urgent-order-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .urgent-order-location {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .urgent-order-time {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        /* Tech List for Tracking */
        .tech-list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: background 0.1s;
        }

        .tech-list-item:hover {
            background: var(--bg-secondary);
        }

        .tech-list-item.active {
            background: var(--indigo-50);
            border-left: 3px solid var(--indigo-600);
        }

        .tech-list-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--indigo-100);
            color: var(--indigo-600);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        .tech-list-info {
            flex: 1;
            min-width: 0;
        }

        .tech-list-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .tech-list-status {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .tech-list-badge {
            font-size: 11px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            white-space: nowrap;
        }

        .tech-list-badge.in-transit {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .tech-list-badge.working {
            background: var(--indigo-600);
            color: #fff;
        }

        .tech-list-badge.available {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        /* ROI Summary Banner */
        .roi-banner {
            background: var(--indigo-600);
            border-radius: var(--radius-lg);
            padding: 24px 32px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .roi-banner-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .roi-banner-icon {
            width: 56px;
            height: 56px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .roi-banner-icon svg {
            width: 28px;
            height: 28px;
        }

        .roi-banner-label {
            font-size: 14px;
            color: rgba(255,255,255,0.85);
            font-weight: 500;
        }

        .roi-banner-value {
            font-size: 36px;
            font-weight: 800;
            color: #fff;
            letter-spacing: -1px;
        }

        .roi-banner-detail {
            font-size: 13px;
            color: rgba(255,255,255,0.85);
            max-width: 280px;
            text-align: right;
        }
        
        /* ==================== MOBILE RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .stats-row { grid-template-columns: repeat(2, 1fr); }
            .dashboard-grid { grid-template-columns: 1fr; }
            .predictions-grid { grid-template-columns: 1fr; }
            .team-grid { grid-template-columns: 1fr; }
            .config-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .sidebar { 
                position: fixed; left: -280px; top: 0; bottom: 0; z-index: 1000;
                transition: left 0.3s ease;
            }
            .sidebar.open { left: 0; }
            .sidebar-overlay {
                display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5);
                z-index: 999;
            }
            .sidebar-overlay.active { display: block; }
            .main { margin-left: 0; }
            .topbar { padding: 16px; }
            .mobile-menu-btn { 
                display: flex; align-items: center; justify-content: center;
                width: 40px; height: 40px; background: none; border: none;
                color: var(--text-primary); cursor: pointer; margin-right: 12px;
            }
            .content { padding: 16px; }
            .stats-row { grid-template-columns: 1fr 1fr; gap: 12px; }
            .stat-card { padding: 16px; }
            .stat-value { font-size: 24px; }
            .card-header, .card-body { padding: 16px; }
            .floor-detail-panel { position: fixed; left: 0; right: 0; bottom: 0; top: auto; height: 60vh; border-radius: 16px 16px 0 0; }
            .tracking-grid { grid-template-columns: 1fr; }
            .cost-comparison { grid-template-columns: 1fr; }
            .roi-banner { flex-direction: column; text-align: center; gap: 16px; }
            .roi-banner-detail { text-align: center; max-width: 100%; }
        }
        
        @media (min-width: 769px) {
            .mobile-menu-btn { display: none; }
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>Mantto</h1>
                        <span>Torre Reforma 115</span>
                    </div>
                </div>
            </div>

            <nav class="nav">
                <div class="nav-section">
                    <div class="nav-section-label">Principal</div>
                    <div class="nav-item active" data-view="dashboard">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/></svg>
                        Dashboard
                    </div>
                    <div class="nav-item" data-view="floormap">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                        Mapa del Edificio
                    </div>
                    <div class="nav-item" data-view="orders">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                        Órdenes de Trabajo
                        <span class="nav-badge">12</span>
                    </div>
                    <div class="nav-item" data-view="team">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                        Equipo
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Análisis</div>
                    <div class="nav-item" data-view="predictive">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                        IA Predictiva
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Recursos</div>
                    <div class="nav-item" data-view="assets">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/></svg>
                        Activos QR
                    </div>
                    <div class="nav-item" data-view="inventory">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
                        Refacciones
                    </div>
                    <div class="nav-item" data-view="vendors">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                        Proveedores
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Sistema</div>
                    <div class="nav-item" data-view="compliance">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                        Cumplimiento
                    </div>
                    <div class="nav-item" data-view="reports">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                        Reportes
                    </div>
                    <div class="nav-item" data-view="config">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        Configuración
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card" style="flex: 1;">
                    <div class="user-avatar">JM</div>
                    <div class="user-info">
                        <div class="user-name">José Martínez</div>
                        <div class="user-role">Administrador</div>
                    </div>
                </div>
                <button onclick="toggleTheme()" style="width: 36px; height: 36px; border-radius: 8px; border: none; background: rgba(255,255,255,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.7);" title="Toggle dark/light mode">
                    <svg id="themeIcon" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <div class="topbar">
                <div class="topbar-left">
                    <button class="mobile-menu-btn" onclick="toggleSidebar()">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                    <span class="page-title" id="pageTitle">Dashboard</span>
                </div>
                <div class="topbar-right">
                    <span id="currentTime" style="color: var(--text-secondary); font-size: 14px; margin-right: 16px;"></span>
                    <button class="btn btn-primary" id="newOrderBtn" onclick="openModal()">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                        Nueva Orden
                    </button>
                </div>
            </div>

            <div class="content">
                <!-- Dashboard -->
                <section class="view active" id="dashboard">
                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Órdenes Abiertas</span>
                                <div class="stat-icon red"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">12</div>
                            <span class="stat-trend negative">↑ 2 vs ayer</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Tiempo Promedio</span>
                                <div class="stat-icon amber"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">2.3h</div>
                            <span class="stat-trend positive">↓ 15% vs mes</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Tasa Resolución</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">98%</div>
                            <span class="stat-trend positive">↑ 3% vs mes</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Gasto Mensual</span>
                                <div class="stat-icon indigo"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">$47.2k</div>
                            <span class="stat-trend negative">↑ 5% vs mes</span>
                        </div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Órdenes Urgentes</h3>
                                <a href="#" onclick="document.querySelector('[data-view=orders]').click(); return false;" style="font-size: 13px; color: var(--indigo-600); text-decoration: none;">Ver todas →</a>
                            </div>
                            <div class="card-body" style="padding: 0;">
                                <div id="urgentOrdersList"></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Actividad Reciente</h3>
                            </div>
                            <div class="card-body" style="padding: 16px 24px;">
                                <div class="activity-feed">
                                    <div class="activity-item">
                                        <div class="activity-icon" style="background: var(--bg-tertiary); color: var(--text-secondary);"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                        <div class="activity-content"><span class="activity-text"><strong>Miguel H.</strong> completó "Fuga en baño P8"</span><span class="activity-time">Hace 12 min</span></div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon" style="background: var(--bg-tertiary); color: var(--text-secondary);"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg></div>
                                        <div class="activity-content"><span class="activity-text"><strong>Ana G.</strong> asignada a ticket #845</span><span class="activity-time">Hace 25 min</span></div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon" style="background: var(--red-500); color: #fff;"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                        <div class="activity-content"><span class="activity-text">Nuevo ticket urgente: <strong>HVAC P12</strong></span><span class="activity-time">Hace 32 min</span></div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon" style="background: var(--bg-tertiary); color: var(--text-secondary);"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                                        <div class="activity-content"><span class="activity-text"><strong>Roberto L.</strong> en camino a P22</span><span class="activity-time">Hace 45 min</span></div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-icon" style="background: var(--bg-tertiary); color: var(--text-secondary);"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                        <div class="activity-content"><span class="activity-text"><strong>Carmen R.</strong> completó "Luz fundida P15"</span><span class="activity-time">Hace 1 hora</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- AI Insights -->
                    <div class="card" style="margin-top: 24px;">
                        <div class="card-header">
                            <h3 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                                <svg width="20" height="20" fill="none" stroke="var(--indigo-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                                Insights IA
                            </h3>
                        </div>
                        <div class="card-body" style="padding: 0;">
                            <div style="display: flex; align-items: flex-start; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 36px; height: 36px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Piso 12 requiere atención</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">3x más incidentes que el promedio. Revisar instalaciones HVAC y plomería.</div>
                                </div>
                                <a href="#" onclick="document.querySelector('[data-view=floormap]').click(); return false;" style="font-size: 13px; color: var(--indigo-600); text-decoration: none; white-space: nowrap;">Ver piso →</a>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 36px; height: 36px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Filtros HVAC por agotarse</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">Stock actual: 3 unidades. Proyección de agotamiento: 2 semanas.</div>
                                </div>
                                <a href="#" onclick="document.querySelector('[data-view=inventory]').click(); return false;" style="font-size: 13px; color: var(--indigo-600); text-decoration: none; white-space: nowrap;">Ver inventario →</a>
                            </div>
                            <div style="display: flex; align-items: flex-start; padding: 16px 24px; gap: 16px;">
                                <div style="width: 36px; height: 36px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Miguel H. mejor rendimiento</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">42 tickets resueltos, tiempo promedio 1.8h. 23% más rápido que el equipo.</div>
                                </div>
                                <a href="#" onclick="document.querySelector('[data-view=team]').click(); return false;" style="font-size: 13px; color: var(--indigo-600); text-decoration: none; white-space: nowrap;">Ver equipo →</a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Floor Map -->
                <section class="view" id="floormap">
                    <!-- Stats -->
                    <div style="display: flex; gap: 16px; margin-bottom: 24px;">
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 12px;">
                            <div style="width: 40px; height: 40px; background: var(--bg-tertiary); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                            </div>
                            <div><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">5</div><div style="font-size: 13px; color: var(--text-secondary);">Pisos con urgentes</div></div>
                        </div>
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 12px;">
                            <div style="width: 40px; height: 40px; background: var(--indigo-100); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="none" stroke="var(--indigo-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                            </div>
                            <div><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">8</div><div style="font-size: 13px; color: var(--text-secondary);">Personal activo</div></div>
                        </div>
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 12px;">
                            <div style="width: 40px; height: 40px; background: var(--bg-tertiary); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                            </div>
                            <div><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">12</div><div style="font-size: 13px; color: var(--text-secondary);">Tickets abiertos</div></div>
                        </div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Vista de pisos</h3>
                                <div class="legend">
                                    <div class="legend-item"><div class="legend-dot urgent"></div> Urgente</div>
                                    <div class="legend-item"><div class="legend-dot pending"></div> Pendiente</div>
                                    <div class="legend-item"><div class="legend-dot resolved"></div> Resuelto</div>
                                    <div class="legend-item"><div class="legend-dot staff"></div> Personal</div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="floor-list" id="floorList"></div>
                            </div>
                        </div>
                        <div class="floor-detail-panel" id="floorDetailPanel">
                            <div class="empty-state">
                                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z"/></svg>
                                <p>Selecciona un piso para<br>ver los detalles</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Orders -->
                <section class="view" id="orders">
                    <!-- Ticket Sources -->
                    <div style="display: flex; gap: 16px; margin-bottom: 24px;">
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: #25D366; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="white" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                            </div>
                            <div style="flex: 1;"><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">47</div><div style="font-size: 13px; color: var(--text-secondary);">vía WhatsApp</div></div>
                        </div>
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: var(--indigo-100); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="none" stroke="var(--indigo-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/></svg>
                            </div>
                            <div style="flex: 1;"><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">23</div><div style="font-size: 13px; color: var(--text-secondary);">vía Código QR</div></div>
                        </div>
                        <div style="flex: 1; padding: 16px 20px; background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: var(--slate-100); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <svg width="20" height="20" fill="none" stroke="var(--slate-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
                            </div>
                            <div style="flex: 1;"><div style="font-size: 24px; font-weight: 700; color: var(--text-primary);">12</div><div style="font-size: 13px; color: var(--text-secondary);">Manual</div></div>
                        </div>
                    </div>

                    <div class="filters-bar">
                        <button class="filter-btn active" data-filter="all">Todas (82)</button>
                        <button class="filter-btn" data-filter="urgent">Urgentes (3)</button>
                        <button class="filter-btn" data-filter="in-progress">En Progreso (4)</button>
                        <button class="filter-btn" data-filter="pending">Pendientes (5)</button>
                    </div>
                    <div class="orders-table">
                        <div class="table-header">
                            <div>Descripción</div><div>Asignado a</div><div>Estado</div><div>Prioridad</div><div>Tiempo</div>
                        </div>
                        <div id="ordersTableBody"></div>
                    </div>
                </section>

                <!-- Live Tracking -->
                <section class="view" id="team">
                    <!-- Internal Tabs -->
                    <div class="section-tabs">
                        <button class="section-tab active" onclick="switchTeamTab('overview')">Vista General</button>
                        <button class="section-tab" onclick="switchTeamTab('tracking')">Seguimiento en Vivo</button>
                    </div>

                    <!-- Tab: Vista General -->
                    <div class="team-tab-content active" id="teamTabOverview">
                        <div class="team-header">
                            <div class="team-stats">
                                <div><div class="team-stat-value">10</div><div class="team-stat-label">Personal Total</div></div>
                                <div><div class="team-stat-value">8</div><div class="team-stat-label">En Servicio</div></div>
                                <div><div class="team-stat-value">23</div><div class="team-stat-label">Tareas Hoy</div></div>
                            </div>
                        </div>
                        <div class="team-grid" id="teamGrid"></div>
                    </div>

                    <!-- Tab: Seguimiento en Vivo -->
                    <div class="team-tab-content" id="teamTabTracking">
                        <div style="display: grid; grid-template-columns: 300px 1fr 400px; gap: 24px;">
                            <!-- Tech List -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Técnicos Activos</h3>
                                </div>
                                <div style="padding: 0;">
                                    <div class="tech-list-item active" onclick="selectTech(0)">
                                        <div class="tech-list-avatar">MH</div>
                                        <div class="tech-list-info">
                                            <div class="tech-list-name">Miguel Hernández</div>
                                            <div class="tech-list-status">En camino a Piso 12</div>
                                        </div>
                                        <div class="tech-list-badge in-transit">En camino</div>
                                    </div>
                                    <div class="tech-list-item" onclick="selectTech(1)">
                                        <div class="tech-list-avatar">AG</div>
                                        <div class="tech-list-info">
                                            <div class="tech-list-name">Ana García</div>
                                            <div class="tech-list-status">Trabajando en Piso 8</div>
                                        </div>
                                        <div class="tech-list-badge working">Trabajando</div>
                                    </div>
                                    <div class="tech-list-item" onclick="selectTech(2)">
                                        <div class="tech-list-avatar">RL</div>
                                        <div class="tech-list-info">
                                            <div class="tech-list-name">Roberto López</div>
                                            <div class="tech-list-status">En camino a Piso 22</div>
                                        </div>
                                        <div class="tech-list-badge in-transit">En camino</div>
                                    </div>
                                    <div class="tech-list-item" onclick="selectTech(3)">
                                        <div class="tech-list-avatar">CR</div>
                                        <div class="tech-list-info">
                                            <div class="tech-list-name">Carmen Ruiz</div>
                                            <div class="tech-list-status">Trabajando en Piso 15</div>
                                        </div>
                                        <div class="tech-list-badge working">Trabajando</div>
                                    </div>
                                    <div class="tech-list-item" onclick="selectTech(4)">
                                        <div class="tech-list-avatar">LS</div>
                                        <div class="tech-list-info">
                                            <div class="tech-list-name">Laura Sánchez</div>
                                            <div class="tech-list-status">Disponible en Piso 27</div>
                                        </div>
                                        <div class="tech-list-badge available">Disponible</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tracking Detail -->
                            <div>
                                <div class="tracking-card" style="margin-bottom: 24px;">
                                    <div class="tracking-header">
                                        <div class="tracking-avatar" id="trackingAvatar">MH</div>
                                        <div>
                                            <div class="tracking-tech-name" id="trackingName">Miguel Hernández</div>
                                            <div class="tracking-tech-role" id="trackingRole">Técnico HVAC</div>
                                        </div>
                                        <div class="tracking-eta" id="trackingEta">ETA ~5 min</div>
                                    </div>
                                    <div class="tracking-progress">
                                        <div class="progress-steps" id="trackingSteps">
                                            <div class="progress-step completed">
                                                <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                                <div class="step-label">Asignado</div>
                                            </div>
                                            <div class="progress-step completed">
                                                <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                                <div class="step-label">En camino</div>
                                            </div>
                                            <div class="progress-step current">
                                                <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg></div>
                                                <div class="step-label">Llegando</div>
                                            </div>
                                            <div class="progress-step">
                                                <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/></svg></div>
                                                <div class="step-label">Trabajando</div>
                                            </div>
                                            <div class="progress-step">
                                                <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                                <div class="step-label">Completado</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tracking-order">
                                        <div class="tracking-order-title" id="trackingOrderTitle">HVAC no enfría correctamente</div>
                                        <div class="tracking-order-location" id="trackingOrderLocation">Piso 12, Oficina 1205</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Building Cross Section -->
                            <div class="building-visualization">
                                <div class="building-label">Torre Reforma 115</div>
                                <div class="building-cross-section">
                                    <div class="building-floors" id="buildingFloors"></div>
                                    <div class="building-marker" id="trackingMarker"><span>MH</span></div>
                                </div>
                                <div class="building-legend">
                                    <span><span class="legend-dot" style="background: var(--indigo-600);"></span> Ubicación actual</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Predictive AI -->
                <section class="view" id="predictive">
                    <div class="roi-banner">
                        <div class="roi-banner-content">
                            <div class="roi-banner-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="roi-banner-label">Ahorro potencial identificado</div>
                                <div class="roi-banner-value">$264,500 MXN</div>
                            </div>
                        </div>
                        <div class="roi-banner-detail">
                            3 equipos en riesgo detectados. Reparar antes de que fallen puede ahorrar hasta 85% del costo de emergencia.
                        </div>
                    </div>
                    <div class="predictions-grid">
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon critical"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">HVAC Unidad 12-A</div><div class="prediction-subtitle">Piso 12, Zona Norte</div></div>
                                <div class="prediction-badge high">87% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: antigüedad del equipo (8 años), historial de fallas similares, patrón de consumo eléctrico anormal</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Reparación preventiva</div><div class="cost-value">$8,500</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Si falla completamente</div><div class="cost-value">$45,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$36,500 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%" onclick="showToast('Mantenimiento programado para HVAC 12-A', 'success')">Programar Mantenimiento Preventivo</button></div>
                        </div>
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon warning"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">Bomba de Agua #2</div><div class="prediction-subtitle">Cuarto de Máquinas</div></div>
                                <div class="prediction-badge medium">72% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: vibración anormal detectada, último mantenimiento hace 14 meses, vida útil estimada</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Reparación preventiva</div><div class="cost-value">$12,000</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Si falla completamente</div><div class="cost-value">$85,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$73,000 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%" onclick="showToast('Mantenimiento programado para Bomba #2', 'success')">Programar Mantenimiento Preventivo</button></div>
                        </div>
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon warning"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">Elevador B - Motor</div><div class="prediction-subtitle">Sistema de Elevadores</div></div>
                                <div class="prediction-badge medium">64% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: 180,000 ciclos desde último servicio, ruido reportado por usuarios, análisis de aceite</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Servicio preventivo</div><div class="cost-value">$25,000</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Reemplazo de motor</div><div class="cost-value">$180,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$155,000 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%" onclick="showToast('Mantenimiento programado para Elevador B', 'success')">Programar Mantenimiento Preventivo</button></div>
                        </div>
                    </div>
                </section>

                <!-- Compliance -->
                <section class="view" id="compliance">
                    <!-- Stats Row -->
                    <div class="stats-row" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 24px;">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Vencimientos Urgentes</span>
                                <div class="stat-icon red"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                            </div>
                            <div class="stat-value">2</div>
                            <span class="stat-trend negative">Próximos 30 días</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Cumplidos Este Año</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">5</div>
                            <span class="stat-trend positive">100% a tiempo</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Próximo Vencimiento</span>
                                <div class="stat-icon amber"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg></div>
                            </div>
                            <div class="stat-value">17d</div>
                            <span class="stat-trend negative">Licencia de Funcionamiento</span>
                        </div>
                    </div>

                    <!-- Timeline Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Calendario de Cumplimiento</h3>
                            <button class="btn btn-primary" style="padding: 8px 16px;" onclick="showToast('Agregar nuevo vencimiento', 'success')">
                                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="margin-right: 6px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                                Agregar
                            </button>
                        </div>
                        <div style="padding: 0;">
                            <div style="display: flex; align-items: center; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 10px; height: 10px; background: var(--red-500); border-radius: 50%; flex-shrink: 0;"></div>
                                <div style="flex: 1;"><div style="font-weight: 500; color: var(--text-primary);">Licencia de Funcionamiento</div><div style="font-size: 13px; color: var(--text-secondary);">Vence: 1 de Marzo, 2026</div></div>
                                <div style="font-weight: 600; color: var(--text-primary);">17 días</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Marcado como completado', 'success')">Completar</button>
                            </div>
                            <div style="display: flex; align-items: center; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 10px; height: 10px; background: var(--red-500); border-radius: 50%; flex-shrink: 0;"></div>
                                <div style="flex: 1;"><div style="font-weight: 500; color: var(--text-primary);">Inspección de Bomberos</div><div style="font-size: 13px; color: var(--text-secondary);">Vence: 15 de Marzo, 2026</div></div>
                                <div style="font-weight: 600; color: var(--text-primary);">31 días</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Marcado como completado', 'success')">Completar</button>
                            </div>
                            <div style="display: flex; align-items: center; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 10px; height: 10px; background: var(--text-muted); border-radius: 50%; flex-shrink: 0;"></div>
                                <div style="flex: 1;"><div style="font-weight: 500; color: var(--text-primary);">Fumigación Trimestral</div><div style="font-size: 13px; color: var(--text-secondary);">Vence: 1 de Abril, 2026</div></div>
                                <div style="font-weight: 600; color: var(--text-primary);">48 días</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Marcado como completado', 'success')">Completar</button>
                            </div>
                            <div style="display: flex; align-items: center; padding: 16px 24px; border-bottom: 1px solid var(--border-light); gap: 16px;">
                                <div style="width: 10px; height: 10px; background: var(--text-secondary); border-radius: 50%; flex-shrink: 0;"></div>
                                <div style="flex: 1;"><div style="font-weight: 500; color: var(--text-primary);">Certificación de Elevadores</div><div style="font-size: 13px; color: var(--text-secondary);">Vence: 1 de Junio, 2026</div></div>
                                <div style="font-weight: 500; color: var(--text-primary);">109 días</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Marcado como completado', 'success')">Completar</button>
                            </div>
                            <div style="display: flex; align-items: center; padding: 16px 24px; gap: 16px;">
                                <div style="width: 10px; height: 10px; background: var(--text-secondary); border-radius: 50%; flex-shrink: 0;"></div>
                                <div style="flex: 1;"><div style="font-weight: 500; color: var(--text-primary);">Mantenimiento de Cisterna</div><div style="font-size: 13px; color: var(--text-secondary);">Vence: 15 de Julio, 2026</div></div>
                                <div style="font-weight: 500; color: var(--text-primary);">153 días</div>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Marcado como completado', 'success')">Completar</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- QR Assets -->
                <section class="view" id="assets">
                    <!-- Hero explanation -->
                    <div style="text-align: center; max-width: 600px; margin: 0 auto 40px;">
                        <h2 style="font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">Códigos QR en cada activo</h2>
                        <p style="font-size: 16px; color: var(--text-secondary); line-height: 1.6;">Etiquetas físicas en equipos del edificio. Escanea → Reporta al instante. Sin confusiones sobre qué equipo tiene el problema.</p>
                    </div>

                    <!-- Visual Flow -->
                    <div style="display: grid; grid-template-columns: 1fr auto 1fr auto 1fr; gap: 24px; align-items: center; margin-bottom: 48px;">
                        <!-- Step 1: Physical QR -->
                        <div class="card" style="text-align: center; padding: 32px;">
                            <div style="font-size: 12px; font-weight: 600; color: var(--indigo-600); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;">Paso 1</div>
                            <div class="qr-code" style="margin: 0 auto 16px;"><div class="qr-pattern"></div></div>
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Etiqueta en el equipo</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">HVAC Piso 12</div>
                        </div>

                        <!-- Arrow -->
                        <div style="color: var(--text-muted);">
                            <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                        </div>

                        <!-- Step 2: Scan -->
                        <div class="card" style="text-align: center; padding: 32px;">
                            <div style="font-size: 12px; font-weight: 600; color: var(--indigo-600); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;">Paso 2</div>
                            <div style="width: 80px; height: 80px; background: var(--bg-secondary); border-radius: 16px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
                                <svg width="40" height="40" fill="none" stroke="var(--text-secondary)" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
                            </div>
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Inquilino escanea</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Con su celular</div>
                        </div>

                        <!-- Arrow -->
                        <div style="color: var(--text-muted);">
                            <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                        </div>

                        <!-- Step 3: Form -->
                        <div class="card" style="text-align: center; padding: 32px;">
                            <div style="font-size: 12px; font-weight: 600; color: var(--indigo-600); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;">Paso 3</div>
                            <div style="width: 80px; height: 80px; background: var(--bg-tertiary); border-radius: 16px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
                                <svg width="40" height="40" fill="none" stroke="var(--text-secondary)" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                            </div>
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">Ticket creado</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Equipo ya identificado</div>
                        </div>
                    </div>

                    <!-- Two panels side by side -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <!-- Tenant View -->
                        <div class="card">
                            <div class="card-header" style="background: var(--bg-tertiary);">
                                <h3 class="card-title" style="color: var(--text-primary);">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display: inline; vertical-align: -4px; margin-right: 8px;"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                                    Lo que ve el inquilino
                                </h3>
                            </div>
                            <div class="card-body">
                                <div style="background: var(--bg-secondary); border-radius: var(--radius-md); padding: 20px;">
                                    <div style="margin-bottom: 16px;">
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Equipo</div>
                                        <div style="font-size: 15px; font-weight: 600; color: var(--text-primary);">HVAC Piso 12 - Unidad 12-A</div>
                                        <div style="font-size: 13px; color: var(--text-primary);">✓ Identificado automáticamente</div>
                                    </div>
                                    <div style="margin-bottom: 16px;">
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Ubicación</div>
                                        <div style="font-size: 14px; color: var(--text-primary);">Piso 12, Zona Norte</div>
                                    </div>
                                    <div style="margin-bottom: 16px;">
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">¿Cuál es el problema?</div>
                                        <div style="background: white; border: 1px solid var(--border); border-radius: 6px; padding: 12px; color: var(--text-muted); font-size: 14px;">No enfría bien...</div>
                                    </div>
                                    <button class="btn btn-primary" style="width: 100%;">Enviar Reporte</button>
                                </div>
                                <div style="margin-top: 16px; text-align: center; font-size: 13px; color: var(--text-secondary);">
                                    Sin buscar "¿qué equipo es?" — ya está pre-llenado
                                </div>
                            </div>
                        </div>

                        <!-- Tech View -->
                        <div class="card">
                            <div class="card-header" style="background: var(--indigo-50);">
                                <h3 class="card-title" style="color: var(--indigo-700);">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display: inline; vertical-align: -4px; margin-right: 8px;"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                                    Lo que ve el técnico
                                </h3>
                            </div>
                            <div class="card-body">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">HVAC Piso 12 - Unidad 12-A</div>
                                <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 20px;">Marca: Carrier | Modelo: 38CKC036 | Instalado: 2018</div>
                                
                                <div style="font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; margin-bottom: 12px;">Historial de Mantenimiento</div>
                                
                                <div style="border-left: 2px solid var(--border); padding-left: 16px;">
                                    <div style="margin-bottom: 16px; position: relative;">
                                        <div style="position: absolute; left: -21px; top: 4px; width: 10px; height: 10px; background: var(--indigo-500); border-radius: 50%;"></div>
                                        <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Cambio de filtros</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">15 Ene 2026 — Miguel H.</div>
                                    </div>
                                    <div style="margin-bottom: 16px; position: relative;">
                                        <div style="position: absolute; left: -21px; top: 4px; width: 10px; height: 10px; background: var(--indigo-500); border-radius: 50%;"></div>
                                        <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Recarga de gas refrigerante</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">3 Dic 2025 — Ana G.</div>
                                    </div>
                                    <div style="position: relative;">
                                        <div style="position: absolute; left: -21px; top: 4px; width: 10px; height: 10px; background: var(--indigo-500); border-radius: 50%;"></div>
                                        <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Limpieza de serpentín</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">18 Oct 2025 — Miguel H.</div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 20px; padding: 12px 16px; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 13px; color: var(--text-secondary);">
                                    <strong>Nota:</strong> Último reporte de "no enfría" fue hace 3 meses — revisar compresor
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats banner -->
                    <div style="margin-top: 32px; padding: 24px; background: var(--bg-primary); border-radius: var(--radius-lg); border: 1px solid var(--border-light); display: flex; justify-content: center; gap: 64px; text-align: center;">
                        <div>
                            <div style="font-size: 32px; font-weight: 700; color: var(--indigo-600);">247</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Activos etiquetados</div>
                        </div>
                        <div>
                            <div style="font-size: 32px; font-weight: 700; color: var(--text-primary);">89%</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Tickets con activo identificado</div>
                        </div>
                        <div>
                            <div style="font-size: 32px; font-weight: 700; color: var(--text-primary);">-40%</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Tickets mal enrutados</div>
                        </div>
                    </div>

                    <!-- All tagged assets -->
                    <div class="card" style="margin-top: 32px;">
                        <div class="card-header">
                            <h3 class="card-title">Todos los Activos Etiquetados</h3>
                            <button class="btn btn-secondary" style="padding: 8px 12px; font-size: 13px;" onclick="showToast('Formulario de nuevo activo', 'success')">
                                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="margin-right: 6px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                                Agregar Activo
                            </button>
                        </div>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: var(--bg-secondary); font-size: 12px; color: var(--text-muted); text-transform: uppercase;">
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Activo</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Ubicación</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Categoría</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Último Servicio</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Estado</th>
                                        <th style="padding: 12px 24px; text-align: center; font-weight: 600;">QR</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px; font-weight: 500;">HVAC Unidad 12-A</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Piso 12, Zona Norte</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">HVAC</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">15 Ene 2026</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Operativo</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px; font-weight: 500;">Elevador A - Motor</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Lobby Principal</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Elevadores</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">8 Feb 2026</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Operativo</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px; font-weight: 500;">Bomba de Agua #2</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Cuarto de Máquinas</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Plomería</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">22 Dic 2025</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Mantenimiento</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px; font-weight: 500;">Generador de Emergencia</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Sótano 2</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--red-500); color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Eléctrico</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">1 Feb 2026</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Operativo</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px; font-weight: 500;">Tablero Eléctrico P15</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Piso 15, Cuarto Técnico</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--red-500); color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Eléctrico</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">10 Ene 2026</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Operativo</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 16px 24px; font-weight: 500;">Sistema Contra Incendios</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Todos los pisos</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--red-500); color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Seguridad</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">5 Feb 2026</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Operativo</span></td>
                                        <td style="padding: 16px 24px; text-align: center;"><button style="background: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 10px; cursor: pointer; font-size: 12px; color: var(--text-secondary);" onclick="showToast('Código QR generado', 'success')">Ver QR</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Inventory -->
                <section class="view" id="inventory">
                    <!-- Stats -->
                    <div class="stats-row" style="grid-template-columns: repeat(4, 1fr);">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Total de Partes</span>
                                <div class="stat-icon indigo"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg></div>
                            </div>
                            <div class="stat-value">1,247</div>
                            <span class="stat-trend positive">156 tipos diferentes</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Valor en Inventario</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">$284k</div>
                            <span class="stat-trend positive">Actualizado hoy</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Stock Bajo</span>
                                <div class="stat-icon amber"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                            </div>
                            <div class="stat-value">8</div>
                            <span class="stat-trend negative">Requieren reorden</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Uso este Mes</span>
                                <div class="stat-icon red"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/></svg></div>
                            </div>
                            <div class="stat-value">89</div>
                            <span class="stat-trend negative">↑ 12% vs mes anterior</span>
                        </div>
                    </div>

                    <!-- Low Stock Alert -->
                    <div style="padding: 16px 20px; background: var(--red-50); border: 1px solid var(--red-100); border-radius: var(--radius-lg); margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
                        <svg width="24" height="24" fill="none" stroke="var(--red-500)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--red-600);">8 partes con stock bajo</div>
                            <div style="font-size: 13px; color: var(--red-500);">Filtros HVAC, Focos LED, y 6 más necesitan reorden</div>
                        </div>
                        <button class="btn btn-secondary" style="background: white;" onclick="showToast('Mostrando 8 partes con stock bajo', 'success')">Ver Todas</button>
                    </div>

                    <!-- Inventory Table -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Inventario de Partes</h3>
                            <div style="display: flex; gap: 12px;">
                                <input type="text" placeholder="Buscar parte..." style="padding: 8px 14px; border: 1px solid var(--border); border-radius: var(--radius-md); font-size: 14px; width: 240px;">
                                <button class="btn btn-primary" style="padding: 8px 14px;" onclick="showToast('Formulario de nueva parte', 'success')">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                                    Agregar
                                </button>
                            </div>
                        </div>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: var(--bg-secondary); font-size: 12px; color: var(--text-muted); text-transform: uppercase;">
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Parte</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Categoría</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">En Stock</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Mínimo</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Costo Unit.</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Estado</th>
                                        <th style="padding: 12px 24px; text-align: left; font-weight: 600;">Ubicación</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Filtro HVAC 20x25x1</div><div style="font-size: 12px; color: var(--text-muted);">SKU: HVAC-F-2025</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">HVAC</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600; color: var(--text-primary);">3</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">10</td>
                                        <td style="padding: 16px 24px;">$185</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--red-500); color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Stock Bajo</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén A-12</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Foco LED 60W</div><div style="font-size: 12px; color: var(--text-muted);">SKU: ELEC-LED-60</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Eléctrico</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600; color: var(--text-primary);">12</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">25</td>
                                        <td style="padding: 16px 24px;">$45</td>
                                        <td style="padding: 16px 24px;"><span style="background: #64748b; color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Bajo</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén B-03</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Válvula de Bola 1/2"</div><div style="font-size: 12px; color: var(--text-muted);">SKU: PLMB-VB-05</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Plomería</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600;">45</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">15</td>
                                        <td style="padding: 16px 24px;">$120</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">OK</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén A-05</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Gas Refrigerante R-410A</div><div style="font-size: 12px; color: var(--text-muted);">SKU: HVAC-GAS-410</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">HVAC</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600;">8</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">5</td>
                                        <td style="padding: 16px 24px;">$850</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">OK</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén C-01</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-light);">
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Interruptor Termomagnético 20A</div><div style="font-size: 12px; color: var(--text-muted);">SKU: ELEC-ITM-20</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Eléctrico</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600;">22</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">10</td>
                                        <td style="padding: 16px 24px;">$380</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">OK</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén B-07</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 16px 24px;"><div style="font-weight: 500;">Aceite para Elevador</div><div style="font-size: 12px; color: var(--text-muted);">SKU: ELEV-OIL-5L</div></td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">Elevadores</span></td>
                                        <td style="padding: 16px 24px; font-weight: 600;">15</td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">8</td>
                                        <td style="padding: 16px 24px;">$420</td>
                                        <td style="padding: 16px 24px;"><span style="background: var(--bg-tertiary); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 500;">OK</span></td>
                                        <td style="padding: 16px 24px; color: var(--text-secondary);">Almacén C-02</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Vendors -->
                <section class="view" id="vendors">
                    <!-- Header with action -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <div>
                            <h2 style="font-size: 20px; font-weight: 600; color: var(--text-primary); margin: 0;">Proveedores Verificados</h2>
                            <p style="font-size: 14px; color: var(--text-secondary); margin: 4px 0 0;">18 proveedores activos · 147 trabajos completados este año</p>
                        </div>
                        <button class="btn btn-primary" onclick="showToast('Solicitud de cotización enviada a 3 proveedores', 'success')">
                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="margin-right: 6px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                            Solicitar Cotización
                        </button>
                    </div>

                    <!-- Filter tabs -->
                    <div class="filters-bar" style="margin-bottom: 24px;">
                        <button class="filter-btn active">Todos (18)</button>
                        <button class="filter-btn">Elevadores (3)</button>
                        <button class="filter-btn">HVAC (3)</button>
                        <button class="filter-btn">Plomería (2)</button>
                        <button class="filter-btn">Eléctrico (3)</button>
                        <button class="filter-btn">Seguridad (2)</button>
                        <button class="filter-btn">Limpieza (2)</button>
                        <button class="filter-btn">General (3)</button>
                    </div>

                    <!-- Vendor cards -->
                    <div class="vendors-grid">
                        <!-- Elevadores -->
                        <div class="vendor-card">
                            <div class="vendor-logo">EO</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Elevadores Otis</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Especialista en elevadores · 12 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.8</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>2h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$25-40k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">ES</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Elevadores Schindler</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Especialista en elevadores · 8 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.6</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>4h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$20-35k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">TK</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">ThyssenKrupp México</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Elevadores y escaleras eléctricas · 5 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.7</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>3h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$22-38k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- HVAC -->
                        <div class="vendor-card">
                            <div class="vendor-logo">HS</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">HVAC Solutions MX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Aire acondicionado y ventilación · 15 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.9</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>3h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$5-15k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">CA</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Carrier México</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Sistemas de climatización · 11 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.7</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>4h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$8-25k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">TR</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Trane CDMX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Chillers y manejadoras · 7 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.8</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>2h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$12-45k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- Plomería -->
                        <div class="vendor-card">
                            <div class="vendor-logo">PE</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Plomería Express</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Plomería comercial e industrial · 21 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.5</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>1h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$2-8k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">HT</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">HidroTec Profesional</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Bombas y sistemas hidráulicos · 9 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.6</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>2h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$5-18k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- Eléctrico -->
                        <div class="vendor-card">
                            <div class="vendor-logo">EF</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">ElectroFix CDMX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Instalaciones eléctricas · 9 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.7</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>2h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$3-10k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">SE</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Schneider Electric MX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Subestaciones y tableros · 4 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.9</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>6h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$15-80k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">IG</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Iluminación Global</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">LED y sistemas de iluminación · 6 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.4</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>1h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$2-12k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- Seguridad -->
                        <div class="vendor-card">
                            <div class="vendor-logo">PS</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">ProSeguridad MX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">CCTV y control de acceso · 8 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.6</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>2h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$4-20k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">FC</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">FireControl Systems</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Sistemas contra incendio · 5 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.8</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>1h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$6-25k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- Limpieza -->
                        <div class="vendor-card">
                            <div class="vendor-logo">LC</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">LimpiezaCorp</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Limpieza profunda y sanitización · 14 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.5</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>4h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$3-8k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">CF</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">CristalFachadas</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Limpieza de fachadas y vidrios · 3 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.7</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>24h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$15-40k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <!-- General -->
                        <div class="vendor-card">
                            <div class="vendor-logo">MI</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Mantenimiento Integral</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Servicios generales · 34 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.4</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>6h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$1-5k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">CP</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Carpintería Profesional</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Puertas, closets y mobiliario · 7 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.3</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>8h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$2-15k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                        <div class="vendor-card">
                            <div class="vendor-logo">PA</div>
                            <div style="flex: 1;">
                                <div class="vendor-name">Pinturas y Acabados MX</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin: 4px 0;">Pintura y resanes · 10 trabajos</div>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 13px;">
                                    <span style="color: var(--text-secondary);"><strong style="color: var(--text-primary);">4.5</strong> rating</span>
                                    <span style="color: var(--text-secondary);">Respuesta: <strong>12h</strong></span>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div class="vendor-price">$3-20k</div>
                                <div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">por trabajo</div>
                            </div>
                        </div>
                    </div>

                    <!-- Active RFQs Section -->
                    <div style="margin-top: 32px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <h3 style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin: 0;">Solicitudes de Cotización Activas</h3>
                            <span style="font-size: 13px; color: var(--text-muted);">4 solicitudes · 2 pendientes de respuesta</span>
                        </div>
                        
                        <!-- RFQ List -->
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <!-- RFQ 1 - Expanded with quotes -->
                            <div class="card" style="padding: 0; overflow: hidden;">
                                <div style="padding: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleRfq('rfq1')">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #10b981;"></div>
                                        <div>
                                            <div style="font-weight: 500; color: var(--text-primary);">Reparación Elevador B</div>
                                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Elevadores · Piso 15 · Solicitado hace 2 días</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 16px;">
                                        <div style="text-align: right;">
                                            <div style="font-size: 13px; font-weight: 500; color: var(--text-primary);">3 respuestas</div>
                                            <div style="font-size: 11px; color: var(--text-muted);">Vence mañana</div>
                                        </div>
                                        <svg id="rfq1-arrow" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color: var(--text-muted); transform: rotate(180deg); transition: transform 0.2s;"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                                    </div>
                                </div>
                                <div id="rfq1-content" style="border-top: 1px solid var(--border); padding: 16px; background: var(--bg-secondary);">
                                    <table class="quotes-table">
                                        <thead><tr><th>Proveedor</th><th>Precio</th><th>Tiempo</th><th>Garantía</th><th>Incluye</th><th></th></tr></thead>
                                        <tbody>
                                            <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">EO</div>Elevadores Otis</div></td><td><strong>$28,500</strong></td><td>3 días</td><td>12 meses</td><td style="font-size: 12px; color: var(--text-secondary);">Refacciones + Mano de obra</td><td><span class="quote-best">Mejor opción</span></td></tr>
                                            <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">ES</div>Elevadores Schindler</div></td><td><strong>$32,000</strong></td><td>5 días</td><td>12 meses</td><td style="font-size: 12px; color: var(--text-secondary);">Refacciones + Mano de obra</td><td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Cotización seleccionada', 'success')">Seleccionar</button></td></tr>
                                            <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">TK</div>ThyssenKrupp</div></td><td><strong>$24,000</strong></td><td>7 días</td><td>6 meses</td><td style="font-size: 12px; color: var(--text-secondary);">Solo mano de obra</td><td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Cotización seleccionada', 'success')">Seleccionar</button></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- RFQ 2 - Has responses, collapsed -->
                            <div class="card" style="padding: 0; overflow: hidden;">
                                <div style="padding: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleRfq('rfq2')">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #10b981;"></div>
                                        <div>
                                            <div style="font-weight: 500; color: var(--text-primary);">Cambio de filtros HVAC</div>
                                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">HVAC · Pisos 10-15 · Solicitado hace 4 días</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 16px;">
                                        <div style="text-align: right;">
                                            <div style="font-size: 13px; font-weight: 500; color: var(--text-primary);">2 respuestas</div>
                                            <div style="font-size: 11px; color: var(--text-muted);">Vence en 3 días</div>
                                        </div>
                                        <svg id="rfq2-arrow" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color: var(--text-muted); transition: transform 0.2s;"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                                    </div>
                                </div>
                                <div id="rfq2-content" style="border-top: 1px solid var(--border); padding: 16px; background: var(--bg-secondary); display: none;">
                                    <table class="quotes-table">
                                        <thead><tr><th>Proveedor</th><th>Precio</th><th>Tiempo</th><th>Garantía</th><th>Incluye</th><th></th></tr></thead>
                                        <tbody>
                                            <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">CA</div>Carrier México</div></td><td><strong>$18,200</strong></td><td>2 días</td><td>6 meses</td><td style="font-size: 12px; color: var(--text-secondary);">Filtros + Instalación</td><td><span class="quote-best">Mejor opción</span></td></tr>
                                            <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">TR</div>Trane CDMX</div></td><td><strong>$21,500</strong></td><td>3 días</td><td>12 meses</td><td style="font-size: 12px; color: var(--text-secondary);">Filtros premium + Instalación</td><td><button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="showToast('Cotización seleccionada', 'success')">Seleccionar</button></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- RFQ 3 - Waiting for responses -->
                            <div class="card" style="padding: 0; overflow: hidden;">
                                <div style="padding: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleRfq('rfq3')">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #f59e0b;"></div>
                                        <div>
                                            <div style="font-weight: 500; color: var(--text-primary);">Impermeabilización azotea</div>
                                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">General · Azotea · Solicitado hoy</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 16px;">
                                        <div style="text-align: right;">
                                            <div style="font-size: 13px; font-weight: 500; color: var(--text-secondary);">Esperando respuestas</div>
                                            <div style="font-size: 11px; color: var(--text-muted);">Enviado a 4 proveedores</div>
                                        </div>
                                        <svg id="rfq3-arrow" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color: var(--text-muted); transition: transform 0.2s;"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                                    </div>
                                </div>
                                <div id="rfq3-content" style="border-top: 1px solid var(--border); padding: 16px; background: var(--bg-secondary); display: none;">
                                    <div style="text-align: center; padding: 24px; color: var(--text-secondary);">
                                        <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="margin: 0 auto 12px; opacity: 0.5;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                        <div style="font-size: 14px;">Esperando respuestas de proveedores</div>
                                        <div style="font-size: 12px; margin-top: 4px;">Enviado a: MI, CP, PA, LC · Vence en 5 días</div>
                                    </div>
                                </div>
                            </div>

                            <!-- RFQ 4 - Waiting for responses -->
                            <div class="card" style="padding: 0; overflow: hidden;">
                                <div style="padding: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleRfq('rfq4')">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #f59e0b;"></div>
                                        <div>
                                            <div style="font-weight: 500; color: var(--text-primary);">Mantenimiento subestación eléctrica</div>
                                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Eléctrico · Sótano · Solicitado ayer</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 16px;">
                                        <div style="text-align: right;">
                                            <div style="font-size: 13px; font-weight: 500; color: var(--text-secondary);">Esperando respuestas</div>
                                            <div style="font-size: 11px; color: var(--text-muted);">Enviado a 2 proveedores</div>
                                        </div>
                                        <svg id="rfq4-arrow" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="color: var(--text-muted); transition: transform 0.2s;"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
                                    </div>
                                </div>
                                <div id="rfq4-content" style="border-top: 1px solid var(--border); padding: 16px; background: var(--bg-secondary); display: none;">
                                    <div style="text-align: center; padding: 24px; color: var(--text-secondary);">
                                        <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="margin: 0 auto 12px; opacity: 0.5;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                        <div style="font-size: 14px;">Esperando respuestas de proveedores</div>
                                        <div style="font-size: 12px; margin-top: 4px;">Enviado a: SE, EF · Vence en 6 días</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Reports -->
                <section class="view" id="reports">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-secondary">
                                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
                                Febrero 2026
                            </button>
                            <span style="color: var(--text-muted);">vs Enero 2026</span>
                        </div>
                        <button class="btn btn-primary" onclick="showToast('Generando PDF...', 'El reporte se descargará en unos segundos', 'success')">
                            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
                            Exportar PDF
                        </button>
                    </div>
                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Total Tickets</span>
                                <div class="stat-icon indigo"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg></div>
                            </div>
                            <div class="stat-value">156</div>
                            <span class="stat-trend positive">↑ 12% vs mes anterior</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Tiempo Promedio</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div>
                            </div>
                            <div class="stat-value">2.3h</div>
                            <span class="stat-trend positive">↑ 18% más rápido</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Resueltos en 24h</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">98%</div>
                            <span class="stat-trend positive">↑ +3 puntos</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Costo Total</span>
                                <div class="stat-icon amber"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">$47.2k</div>
                            <span class="stat-trend positive">↓ 8% menos</span>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                        <div class="card" style="padding: 24px;">
                            <h3 class="report-section-title">Distribución por Categoría</h3>
                            <div class="category-bar"><div class="category-label">Plomería</div><div class="category-track"><div class="category-fill" style="width:35%"></div></div><div class="category-value">54</div></div>
                            <div class="category-bar"><div class="category-label">Electricidad</div><div class="category-track"><div class="category-fill" style="width:25%"></div></div><div class="category-value">39</div></div>
                            <div class="category-bar"><div class="category-label">HVAC</div><div class="category-track"><div class="category-fill" style="width:20%"></div></div><div class="category-value">31</div></div>
                            <div class="category-bar"><div class="category-label">Elevadores</div><div class="category-track"><div class="category-fill" style="width:12%"></div></div><div class="category-value">19</div></div>
                            <div class="category-bar"><div class="category-label">Otros</div><div class="category-track"><div class="category-fill" style="width:8%"></div></div><div class="category-value">13</div></div>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <h3 class="report-section-title">Rendimiento por Técnico</h3>
                            <table class="tech-table">
                                <thead><tr><th>Técnico</th><th>Tickets</th><th>T. Prom</th><th>Eficiencia</th></tr></thead>
                                <tbody>
                                    <tr><td><div class="tech-name"><div class="tech-avatar-sm">MH</div>Miguel Hernández</div></td><td>42</td><td>1.8h</td><td><div class="perf-bar"><div class="perf-fill" style="width:95%"></div></div></td></tr>
                                    <tr><td><div class="tech-name"><div class="tech-avatar-sm">AG</div>Ana García</div></td><td>38</td><td>2.1h</td><td><div class="perf-bar"><div class="perf-fill" style="width:88%"></div></div></td></tr>
                                    <tr><td><div class="tech-name"><div class="tech-avatar-sm">RL</div>Roberto López</div></td><td>35</td><td>2.4h</td><td><div class="perf-bar"><div class="perf-fill medium" style="width:75%"></div></div></td></tr>
                                    <tr><td><div class="tech-name"><div class="tech-avatar-sm">CR</div>Carmen Ruiz</div></td><td>28</td><td>2.8h</td><td><div class="perf-bar"><div class="perf-fill medium" style="width:68%"></div></div></td></tr>
                                    <tr><td><div class="tech-name"><div class="tech-avatar-sm">LM</div>Laura Méndez</div></td><td>13</td><td>3.1h</td><td><div class="perf-bar"><div class="perf-fill low" style="width:52%"></div></div></td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <h3 class="report-section-title">Costos por Categoría</h3>
                            <div class="category-bar"><div class="category-label">Elevadores</div><div class="category-track"><div class="category-fill" style="width:40%; background: var(--text-secondary)"></div></div><div class="category-value">$18.9k</div></div>
                            <div class="category-bar"><div class="category-label">HVAC</div><div class="category-track"><div class="category-fill" style="width:30%; background: var(--text-secondary)"></div></div><div class="category-value">$14.2k</div></div>
                            <div class="category-bar"><div class="category-label">Plomería</div><div class="category-track"><div class="category-fill" style="width:15%; background: var(--text-secondary)"></div></div><div class="category-value">$7.1k</div></div>
                            <div class="category-bar"><div class="category-label">Electricidad</div><div class="category-track"><div class="category-fill" style="width:10%; background: var(--text-secondary)"></div></div><div class="category-value">$4.7k</div></div>
                            <div class="category-bar"><div class="category-label">Otros</div><div class="category-track"><div class="category-fill" style="width:5%; background: var(--text-secondary)"></div></div><div class="category-value">$2.3k</div></div>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <h3 class="report-section-title">Pisos con Mayor Incidencia</h3>
                            <div class="category-bar"><div class="category-label">Piso 12</div><div class="category-track"><div class="category-fill" style="width:45%; background: var(--red-500)"></div></div><div class="category-value">23</div></div>
                            <div class="category-bar"><div class="category-label">Piso 8</div><div class="category-track"><div class="category-fill" style="width:35%; background: var(--text-muted)"></div></div><div class="category-value">18</div></div>
                            <div class="category-bar"><div class="category-label">Piso 15</div><div class="category-track"><div class="category-fill" style="width:30%; background: var(--text-muted)"></div></div><div class="category-value">15</div></div>
                            <div class="category-bar"><div class="category-label">Piso 3</div><div class="category-track"><div class="category-fill" style="width:25%; background: var(--indigo-500)"></div></div><div class="category-value">13</div></div>
                            <div class="category-bar"><div class="category-label">Piso 20</div><div class="category-track"><div class="category-fill" style="width:20%; background: var(--indigo-500)"></div></div><div class="category-value">10</div></div>
                        </div>
                    </div>
                </section>

                <!-- Config -->
                <section class="view" id="config">
                    <div class="config-grid">
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--indigo-100); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="none" stroke="var(--indigo-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                                    </div>
                                    <h3 class="config-card-title">Información del Edificio</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Nombre</span><span class="config-value">Torre Reforma 115</span></div>
                                <div class="config-row"><span class="config-label">Pisos</span><span class="config-value">30</span></div>
                                <div class="config-row"><span class="config-label">Dirección</span><span class="config-value">Paseo de la Reforma 115, CDMX</span></div>
                                <div class="config-row"><span class="config-label">Personal</span><span class="config-value">10 técnicos</span></div>
                                <div class="config-row"><span class="config-label">Inquilinos</span><span class="config-value">47 empresas</span></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/></svg>
                                    </div>
                                    <h3 class="config-card-title">Notificaciones</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Email</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                                <div class="config-row"><span class="config-label">Push Notifications</span><div class="toggle" onclick="this.classList.toggle('active')"></div></div>
                                <div class="config-row"><span class="config-label">Resumen Diario</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                    </div>
                                    <h3 class="config-card-title">SLAs por Prioridad</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Urgente</span><span class="config-value" style="color: var(--text-primary); font-weight: 600;">1 hora</span></div>
                                <div class="config-row"><span class="config-label">Alta</span><span class="config-value" style="color: var(--text-primary); font-weight: 600;">4 horas</span></div>
                                <div class="config-row"><span class="config-label">Normal</span><span class="config-value">24 horas</span></div>
                                <div class="config-row"><span class="config-label">Baja</span><span class="config-value">72 horas</span></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="none" stroke="var(--text-secondary)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
                                    </div>
                                    <h3 class="config-card-title">Integraciones</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">WhatsApp Business</span><span class="config-value" style="color: var(--text-primary); display: flex; align-items: center; gap: 6px;"><span style="width: 8px; height: 8px; background: var(--text-secondary); border-radius: 50%;"></span>Conectado</span></div>
                                <div class="config-row"><span class="config-label">Google Calendar</span><span class="config-value" style="color: var(--text-primary); display: flex; align-items: center; gap: 6px;"><span style="width: 8px; height: 8px; background: var(--text-secondary); border-radius: 50%;"></span>Conectado</span></div>
                                <div class="config-row"><span class="config-label">SAP (ERP)</span><span class="config-value" style="color: var(--text-muted);">No configurado</span></div>
                                <div class="config-row"><span class="config-label">Sistema de Acceso</span><span class="config-value" style="color: var(--text-muted);">No configurado</span></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--bg-tertiary); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="#25D366" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                                    </div>
                                    <h3 class="config-card-title">Canal WhatsApp</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Número</span><span class="config-value">+52 55 1234 5678</span></div>
                                <div class="config-row"><span class="config-label">Horario</span><span class="config-value">Lun-Vie, 7:00-22:00</span></div>
                                <div class="config-row"><span class="config-label">Auto-respuesta</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                                <div class="config-row"><span class="config-label">IA Categorización</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 32px; height: 32px; background: var(--slate-100); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="18" height="18" fill="none" stroke="var(--slate-600)" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                                    </div>
                                    <h3 class="config-card-title">Usuarios</h3>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Administradores</span><span class="config-value">3</span></div>
                                <div class="config-row"><span class="config-label">Técnicos</span><span class="config-value">10</span></div>
                                <div class="config-row"><span class="config-label">Inquilinos</span><span class="config-value">47</span></div>
                                <div class="config-row"><span class="config-label" style="color: var(--indigo-600); cursor: pointer;">Gestionar usuarios →</span></div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header"><h2 class="modal-title">Nueva Orden de Trabajo</h2><button class="modal-close" onclick="closeModal()"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg></button></div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Piso</label><select class="form-select"><option>Seleccionar...</option><option>Piso 1</option><option>Piso 5</option><option>Piso 10</option><option>Piso 12</option><option>Piso 15</option><option>Piso 20</option><option>Piso 25</option><option>Piso 30</option></select></div>
                    <div class="form-group"><label class="form-label">Categoría</label><select class="form-select"><option>Seleccionar...</option><option>Plomería</option><option>Electricidad</option><option>HVAC</option><option>Elevadores</option><option>Limpieza</option><option>Otro</option></select></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Prioridad</label><select class="form-select"><option>Normal</option><option>Alta</option><option>Urgente</option></select></div>
                    <div class="form-group"><label class="form-label">Asignar a</label><select class="form-select"><option>Sin asignar</option><option>Miguel Hernández</option><option>Ana García</option><option>Roberto López</option><option>Carmen Ruiz</option></select></div>
                </div>
                <div class="form-group"><label class="form-label">Ubicación específica</label><input type="text" class="form-input" placeholder="Ej: Oficina 1205, Baño común norte..."></div>
                <div class="form-group"><label class="form-label">Descripción del problema</label><textarea class="form-textarea" placeholder="Describe el problema..."></textarea></div>
            </div>
            <div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button class="btn btn-primary" onclick="createOrder()">Crear Orden</button></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Order Detail Drawer -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()">
        <div class="drawer" onclick="event.stopPropagation()">
            <div class="drawer-header">
                <h3 class="drawer-title">Detalle de Orden</h3>
                <button class="drawer-close" onclick="closeDrawer()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="drawer-body" id="drawerBody">
                <!-- Populated by JS -->
            </div>
            <div class="drawer-footer">
                <button class="btn btn-secondary" style="flex:1" onclick="closeDrawer()">Cerrar</button>
                <button class="btn btn-primary" style="flex:1" onclick="showToast('Estado actualizado', 'Orden marcada como en progreso', 'success'); closeDrawer();">Actualizar Estado</button>
            </div>
        </div>
    </div>

    <script>
        // RFQ accordion toggle
        function toggleRfq(rfqId) {
            const content = document.getElementById(rfqId + '-content');
            const arrow = document.getElementById(rfqId + '-arrow');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Toast notification system
        function showToast(title, message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>',
                error: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>',
                warning: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>'
            };

            toast.innerHTML = `
                <div class="toast-icon">${icons[type]}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    ${message ? `<div class="toast-message">${message}</div>` : ''}
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            `;

            container.appendChild(toast);

            // Auto-remove after 4 seconds
            setTimeout(() => {
                toast.classList.add('removing');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        const team = [
            { id: 1, name: 'Miguel Hernández', initials: 'MH', role: 'Técnico HVAC', floor: 12, online: true, tasksToday: 4, completed: 3, avgTime: '1.8h' },
            { id: 2, name: 'Ana García', initials: 'AG', role: 'Electricista', floor: 8, online: true, tasksToday: 3, completed: 3, avgTime: '2.1h' },
            { id: 3, name: 'Roberto López', initials: 'RL', role: 'Plomero', floor: 22, online: true, tasksToday: 5, completed: 4, avgTime: '1.5h' },
            { id: 4, name: 'Carmen Ruiz', initials: 'CR', role: 'Técnico General', floor: 15, online: true, tasksToday: 3, completed: 2, avgTime: '2.4h' },
            { id: 5, name: 'José Martínez', initials: 'JM', role: 'Supervisor', floor: 1, online: true, tasksToday: 2, completed: 2, avgTime: '1.2h' },
            { id: 6, name: 'Laura Sánchez', initials: 'LS', role: 'Técnico HVAC', floor: 27, online: true, tasksToday: 4, completed: 3, avgTime: '2.0h' },
            { id: 7, name: 'Pedro Ramírez', initials: 'PR', role: 'Plomero', floor: 5, online: false, tasksToday: 0, completed: 0, avgTime: '1.9h' },
            { id: 8, name: 'María Torres', initials: 'MT', role: 'Electricista', floor: 18, online: true, tasksToday: 3, completed: 2, avgTime: '2.2h' }
        ];

        const orders = [
            { id: 1, title: 'HVAC no enfría correctamente', location: 'Piso 12, Oficina 1205', assignee: team[0], status: 'urgent', priority: 'high', time: '30 min' },
            { id: 2, title: 'Fuga de agua en lavabo', location: 'Piso 8, Baño común', assignee: team[2], status: 'in-progress', priority: 'high', time: '1h 15min' },
            { id: 3, title: 'Luz fundida en pasillo', location: 'Piso 15, Pasillo norte', assignee: team[1], status: 'pending', priority: 'medium', time: '2h 30min' },
            { id: 4, title: 'Puerta de emergencia atascada', location: 'Piso 22, Escalera B', assignee: team[3], status: 'urgent', priority: 'high', time: '45 min' },
            { id: 5, title: 'Elevador A hace ruido extraño', location: 'Lobby principal', assignee: null, status: 'pending', priority: 'medium', time: '3h' },
            { id: 6, title: 'Gotera en techo', location: 'Piso 28, Oficina 2801', assignee: team[2], status: 'in-progress', priority: 'medium', time: '1h 45min' },
            { id: 7, title: 'Tomacorriente no funciona', location: 'Piso 5, Sala de juntas', assignee: team[1], status: 'in-progress', priority: 'low', time: '4h' },
            { id: 8, title: 'AC hace ruido', location: 'Piso 18, Oficina 1803', assignee: team[5], status: 'pending', priority: 'low', time: '5h' },
            { id: 9, title: 'Ventana no cierra bien', location: 'Piso 10, Oficina 1001', assignee: null, status: 'pending', priority: 'low', time: '6h' },
            { id: 10, title: 'Sensor de humo parpadea', location: 'Piso 25, Pasillo', assignee: null, status: 'urgent', priority: 'high', time: '15 min' }
        ];

        function generateFloorData() {
            const floors = [];
            for (let f = 30; f >= 1; f--) {
                const incidents = [];
                orders.forEach(order => {
                    const orderFloor = parseInt(order.location.match(/Piso (\d+)/)?.[1] || 0);
                    if (orderFloor === f) incidents.push({ title: order.title, status: order.status === 'urgent' ? 'urgent' : order.status === 'resolved' ? 'resolved' : 'pending', position: 10 + Math.random() * 75 });
                });
                if (Math.random() > 0.6) incidents.push({ title: 'Completado', status: 'resolved', position: 10 + Math.random() * 75 });
                team.forEach(member => { if (member.floor === f && member.online) incidents.push({ title: member.name, status: 'staff', position: 10 + Math.random() * 75, initials: member.initials }); });
                floors.push({ floor: f, incidents });
            }
            return floors;
        }

        const floorData = generateFloorData();
        let selectedFloor = null;

        function renderFloorMap() {
            const container = document.getElementById('floorList');
            container.innerHTML = '';
            floorData.forEach(floor => {
                const row = document.createElement('div');
                row.className = 'floor-row' + (selectedFloor === floor.floor ? ' selected' : '');
                row.onclick = () => selectFloor(floor.floor);
                const urgent = floor.incidents.filter(i => i.status === 'urgent').length;
                const pending = floor.incidents.filter(i => i.status === 'pending').length;
                const resolved = floor.incidents.filter(i => i.status === 'resolved').length;
                const staff = floor.incidents.filter(i => i.status === 'staff').length;
                // Bar intensity based on active issues
                const activeIssues = urgent + pending;
                const level = urgent > 0 ? 4 : (activeIssues > 1 ? 3 : (activeIssues > 0 ? 2 : (resolved > 0 ? 1 : 0)));
                // Summary dots only (no dots on bar)
                let summaryDots = '';
                for (let i = 0; i < urgent; i++) summaryDots += '<div class="summary-dot urgent"></div>';
                for (let i = 0; i < pending; i++) summaryDots += '<div class="summary-dot pending"></div>';
                for (let i = 0; i < resolved; i++) summaryDots += '<div class="summary-dot resolved"></div>';
                for (let i = 0; i < staff; i++) summaryDots += '<div class="summary-dot staff"></div>';
                row.innerHTML = `<div class="floor-label">P${floor.floor}</div><div class="floor-bar-container"><div class="floor-bar level-${level}"></div></div><div class="floor-summary">${summaryDots}</div>`;
                container.appendChild(row);
            });
        }

        function selectFloor(floorNum) {
            selectedFloor = floorNum;
            renderFloorMap();
            const floor = floorData.find(f => f.floor === floorNum);
            const panel = document.getElementById('floorDetailPanel');
            const incidents = floor.incidents.filter(i => i.status !== 'staff');
            const staffOnFloor = floor.incidents.filter(i => i.status === 'staff');
            const urgent = incidents.filter(i => i.status === 'urgent').length;
            const pending = incidents.filter(i => i.status === 'pending').length;
            const resolved = incidents.filter(i => i.status === 'resolved').length;
            const avgIncidents = floorData.reduce((sum, f) => sum + f.incidents.filter(i => i.status !== 'staff').length, 0) / 30;
            const hasInsight = incidents.length > avgIncidents * 2;
            let incidentsHtml = incidents.filter(i => i.status !== 'resolved').map(inc => `<div class="incident-card ${inc.status}"><div class="incident-title">${inc.title}</div><div class="incident-status">${inc.status === 'urgent' ? 'Urgente' : 'Pendiente'}</div></div>`).join('');
            const staffNames = staffOnFloor.length > 0 ? staffOnFloor.map(s => s.initials).join(', ') : 'Ninguno';
            panel.innerHTML = `<div class="detail-header"><div class="detail-floor-num">Piso ${floorNum}</div><div class="detail-subtitle">${incidents.length} incidentes · ${staffOnFloor.length} personal presente</div></div>${hasInsight ? `<div class="ai-insight"><div class="ai-insight-header"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>Insight IA</div><div class="ai-insight-text">Este piso tiene ${Math.round(incidents.length / avgIncidents)}x más incidentes que el promedio.</div></div>` : ''}<div class="detail-stats"><div class="detail-stat-row"><span class="detail-stat-label">Incidentes urgentes</span><span class="detail-stat-value urgent">${urgent}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Pendientes</span><span class="detail-stat-value pending">${pending}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Resueltos hoy</span><span class="detail-stat-value resolved">${resolved}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Personal en piso</span><span class="detail-stat-value">${staffNames}</span></div></div>${incidentsHtml ? `<div class="detail-incidents"><h4 class="detail-section-title">Incidentes activos</h4>${incidentsHtml}</div>` : ''}`;
        }

        function renderOrders(filter = 'all') {
            const container = document.getElementById('ordersTableBody');
            const filtered = filter === 'all' ? orders : orders.filter(o => o.status === filter);
            container.innerHTML = filtered.map(order => `<div class="table-row" onclick="showOrderDetail(${order.id})"><div><div class="order-title">${order.title}</div><div class="order-location">${order.location}</div></div><div class="order-assignee">${order.assignee ? `<div class="assignee-avatar">${order.assignee.initials}</div><span>${order.assignee.name.split(' ')[0]}</span>` : '<span style="color:var(--text-muted)">Sin asignar</span>'}</div><div><span class="status-badge ${order.status}"><span class="status-dot"></span>${order.status === 'urgent' ? 'Urgente' : order.status === 'in-progress' ? 'En progreso' : 'Pendiente'}</span></div><div><span class="priority-indicator ${order.priority}"></span>${order.priority === 'high' ? 'Alta' : order.priority === 'medium' ? 'Media' : 'Baja'}</div><div class="time-ago">${order.time}</div></div>`).join('');
        }

        function renderTeam() {
            const container = document.getElementById('teamGrid');
            container.innerHTML = team.map(member => `<div class="team-card"><div class="team-card-header"><div class="team-avatar ${member.online ? 'online' : ''}">${member.initials}</div><div><div class="team-name">${member.name}</div><div class="team-role">${member.role}</div>${member.online ? `<div class="team-location"><svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>Piso ${member.floor}</div>` : '<div style="font-size:12px;color:var(--text-muted);margin-top:4px">Fuera de servicio</div>'}</div></div><div class="team-metrics"><div class="team-metric"><div class="team-metric-value">${member.completed}/${member.tasksToday}</div><div class="team-metric-label">Tareas</div></div><div class="team-metric"><div class="team-metric-value">${member.avgTime}</div><div class="team-metric-label">Promedio</div></div><div class="team-metric"><div class="team-metric-value">${member.online ? Math.round(member.completed / member.tasksToday * 100) || 0 : '—'}%</div><div class="team-metric-label">Eficiencia</div></div></div></div>`).join('');
        }

        const pageTitles = { dashboard: 'Dashboard', floormap: 'Mapa del Edificio', orders: 'Órdenes de Trabajo', team: 'Equipo', predictive: 'IA Predictiva', compliance: 'Cumplimiento', assets: 'Activos QR', inventory: 'Refacciones', vendors: 'Proveedores', reports: 'Reportes', config: 'Configuración' };

        const showNewOrderViews = ['dashboard', 'floormap', 'orders'];
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const view = item.dataset.view;
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                item.classList.add('active');
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById(view).classList.add('active');
                document.getElementById('pageTitle').textContent = pageTitles[view];
                document.getElementById('newOrderBtn').style.display = showNewOrderViews.includes(view) ? 'inline-flex' : 'none';
                // Close sidebar on mobile
                if (window.innerWidth <= 768) {
                    document.querySelector('.sidebar').classList.remove('open');
                    document.querySelector('.sidebar-overlay').classList.remove('active');
                }
            });
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderOrders(btn.dataset.filter);
            });
        });

        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }
        
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }
        
        function updateThemeIcon(theme) {
            const icon = document.getElementById('themeIcon');
            if (theme === 'dark') {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>';
            } else {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>';
            }
        }
        
        // Load saved theme on page load
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                updateThemeIcon('dark');
            }
        })();
        function openModal() { document.getElementById('modalOverlay').classList.add('active'); }
        function closeModal() { document.getElementById('modalOverlay').classList.remove('active'); }

        function showOrderDetail(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            const statusLabels = { urgent: 'Urgente', 'in-progress': 'En Progreso', pending: 'Pendiente', resolved: 'Resuelto' };
            const priorityLabels = { high: 'Alta', medium: 'Media', low: 'Baja' };

            document.getElementById('drawerBody').innerHTML = `
                <div class="drawer-section">
                    <h3 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">${order.title}</h3>
                    <span class="status-badge ${order.status}"><span class="status-dot"></span>${statusLabels[order.status]}</span>
                </div>

                <div class="drawer-section">
                    <div class="drawer-section-title">Información</div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Ticket #</span>
                        <span class="drawer-info-value">${840 + order.id}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Ubicación</span>
                        <span class="drawer-info-value">${order.location}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Prioridad</span>
                        <span class="drawer-info-value"><span class="priority-indicator ${order.priority}"></span>${priorityLabels[order.priority]}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Asignado a</span>
                        <span class="drawer-info-value">${order.assignee ? order.assignee.name : 'Sin asignar'}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Tiempo abierto</span>
                        <span class="drawer-info-value">${order.time}</span>
                    </div>
                </div>

                <div class="drawer-section">
                    <div class="drawer-section-title">Historial</div>
                    <div class="drawer-timeline">
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Ticket creado</div>
                            <div class="timeline-event-time">Hoy, 14:32</div>
                        </div>
                        ${order.assignee ? `
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Asignado a ${order.assignee.name}</div>
                            <div class="timeline-event-time">Hoy, 14:35</div>
                        </div>
                        ` : ''}
                        ${order.status === 'in-progress' ? `
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Técnico en camino</div>
                            <div class="timeline-event-time">Hoy, 14:40</div>
                        </div>
                        <div class="timeline-event">
                            <div class="timeline-event-title">En progreso</div>
                            <div class="timeline-event-time">Ahora</div>
                        </div>
                        ` : ''}
                        ${order.status === 'pending' || order.status === 'urgent' ? `
                        <div class="timeline-event">
                            <div class="timeline-event-title">Esperando asignación</div>
                            <div class="timeline-event-time">Pendiente</div>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;

            document.getElementById('drawerOverlay').classList.add('active');
        }

        function closeDrawer() {
            document.getElementById('drawerOverlay').classList.remove('active');
        }

        // Tech tracking data
        const trackingData = [
            { initials: 'MH', name: 'Miguel Hernández', role: 'Técnico HVAC', eta: '~5 min', order: 'HVAC no enfría correctamente', location: 'Piso 12, Oficina 1205', step: 2, floor: 12 },
            { initials: 'AG', name: 'Ana García', role: 'Electricista', eta: 'En sitio', order: 'Tomacorriente no funciona', location: 'Piso 8, Sala de juntas', step: 3, floor: 8 },
            { initials: 'RL', name: 'Roberto López', role: 'Plomero', eta: '~12 min', order: 'Puerta de emergencia atascada', location: 'Piso 22, Escalera B', step: 1, floor: 22 },
            { initials: 'CR', name: 'Carmen Ruiz', role: 'Técnico General', eta: 'En sitio', order: 'Luz fundida en pasillo', location: 'Piso 15, Pasillo norte', step: 3, floor: 15 },
            { initials: 'LS', name: 'Laura Sánchez', role: 'Técnico HVAC', eta: 'Disponible', order: 'Sin tarea asignada', location: 'Piso 27', step: 0, floor: 27 }
        ];

        // Render building floors
        function renderBuildingFloors() {
            const container = document.getElementById('buildingFloors');
            if (!container) return;
            
            let html = '';
            for (let f = 30; f >= 1; f--) {
                html += `<div class="building-floor" data-floor="${f}">
                    <span class="building-floor-label">P${f}</span>
                    <div class="building-floor-bar"></div>
                </div>`;
            }
            container.innerHTML = html;
        }

        function switchTeamTab(tab) {
            document.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.team-tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab === 'overview' ? 'teamTabOverview' : 'teamTabTracking').classList.add('active');
            if (tab === 'tracking') {
                setTimeout(() => selectTech(0), 100);
            }
        }

        function selectTech(index) {
            const tech = trackingData[index];
            
            // Update list selection
            document.querySelectorAll('.tech-list-item').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });

            // Update tracking card
            document.getElementById('trackingAvatar').textContent = tech.initials;
            document.getElementById('trackingName').textContent = tech.name;
            document.getElementById('trackingRole').textContent = tech.role;
            document.getElementById('trackingEta').textContent = tech.step === 0 ? 'Disponible' : 'ETA ' + tech.eta;
            document.getElementById('trackingOrderTitle').textContent = tech.order;
            document.getElementById('trackingOrderLocation').textContent = tech.location;

            // Update progress steps
            const steps = document.querySelectorAll('#trackingSteps .progress-step');
            steps.forEach((step, i) => {
                step.classList.remove('completed', 'current');
                if (i < tech.step) step.classList.add('completed');
                if (i === tech.step) step.classList.add('current');
            });

            // Update building visualization
            document.querySelectorAll('.building-floor').forEach(el => {
                el.classList.remove('highlighted');
                if (parseInt(el.dataset.floor) === tech.floor) {
                    el.classList.add('highlighted');
                }
            });

            // Update marker position (calculate based on floor)
            const marker = document.getElementById('trackingMarker');
            const topPercent = ((30 - tech.floor) / 30) * 100;
            marker.style.top = `calc(${topPercent}% + 2px)`;
            marker.textContent = tech.initials;
        }
        function createOrder() { 
            showToast('Orden creada', 'Ticket #848 asignado a Miguel Hernández', 'success');
            closeModal();
        }
        document.getElementById('modalOverlay').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

        // Render urgent orders in dashboard
        function renderUrgentOrders() {
            const container = document.getElementById('urgentOrdersList');
            const urgentOrders = orders.filter(o => o.status === 'urgent' || o.priority === 'high').slice(0, 5);
            container.innerHTML = urgentOrders.map(order => `
                <div class="urgent-order-item" onclick="showOrderDetail(${order.id})">
                    <div class="urgent-order-indicator"></div>
                    <div class="urgent-order-info">
                        <div class="urgent-order-title">${order.title}</div>
                        <div class="urgent-order-location">${order.location}</div>
                    </div>
                    <div class="urgent-order-time">${order.time}</div>
                </div>
            `).join('');
        }

        renderFloorMap();
        renderOrders();
        renderTeam();
        renderUrgentOrders();
        renderBuildingFloors();
        setTimeout(() => selectFloor(12), 100);

        // Update current time
        function updateTime() {
            const now = new Date();
            const options = { weekday: 'short', day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' };
            document.getElementById('currentTime').textContent = now.toLocaleDateString('es-MX', options);
        }
        updateTime();
        setInterval(updateTime, 60000);

        // Animated count-up for stats
        function animateValue(element, start, end, duration, suffix = '') {
            const range = end - start;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const current = start + (range * easeOut);
                
                if (suffix === 'h') {
                    element.textContent = current.toFixed(1) + suffix;
                } else if (suffix === '%') {
                    element.textContent = Math.round(current) + suffix;
                } else if (suffix === 'k') {
                    element.textContent = '$' + current.toFixed(1) + suffix;
                } else {
                    element.textContent = Math.round(current);
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            requestAnimationFrame(update);
        }

            </script>
</body>
</html>