<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantto — Gestión Inteligente de Mantenimiento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            
            --indigo-50: #eef2ff;
            --indigo-100: #e0e7ff;
            --indigo-500: #6366f1;
            --indigo-600: #4f46e5;
            --indigo-700: #4338ca;
            --indigo-900: #1e1b4b;
            
            --emerald-50: #ecfdf5;
            --emerald-500: #10b981;
            --emerald-600: #059669;
            
            --amber-50: #fffbeb;
            --amber-500: #f59e0b;
            --amber-600: #d97706;
            
            --red-50: #fef2f2;
            --red-500: #ef4444;
            --red-600: #dc2626;
            
            --blue-500: #3b82f6;
            --purple-500: #8b5cf6;
            --purple-600: #7c3aed;
            
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -2px rgba(0,0,0,0.04);
            
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
        }

        .app { display: flex; height: 100vh; overflow: hidden; }

        /* ==================== SIDEBAR ==================== */
        .sidebar {
            width: 260px;
            background: var(--indigo-900);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .logo { display: flex; align-items: center; gap: 12px; }

        .logo-icon {
            width: 36px; height: 36px;
            background: var(--indigo-600);
            border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }

        .logo-icon svg { width: 20px; height: 20px; color: white; }

        .logo-text h1 { font-size: 18px; font-weight: 700; color: #fff; letter-spacing: -0.3px; }
        .logo-text span { font-size: 12px; color: rgba(255,255,255,0.5); }

        .nav { padding: 16px 12px; flex: 1; overflow-y: auto; }
        .nav-section { margin-bottom: 24px; }
        .nav-section-label {
            font-size: 11px; font-weight: 600; color: rgba(255,255,255,0.4);
            text-transform: uppercase; letter-spacing: 0.5px;
            padding: 0 12px; margin-bottom: 8px;
        }

        .nav-item {
            display: flex; align-items: center; gap: 12px;
            padding: 10px 12px; color: rgba(255,255,255,0.7);
            font-size: 14px; font-weight: 500; cursor: pointer;
            border-radius: var(--radius-md); transition: all 0.15s ease; margin-bottom: 2px;
        }

        .nav-item:hover { background: rgba(255,255,255,0.08); color: #fff; }
        .nav-item.active { background: #fff; color: var(--indigo-700); font-weight: 600; }
        .nav-item svg { width: 20px; height: 20px; flex-shrink: 0; }

        .nav-badge {
            margin-left: auto; background: var(--red-500); color: #fff;
            font-size: 11px; font-weight: 600; padding: 2px 8px; border-radius: 10px;
        }

        .nav-item.active .nav-badge { background: var(--red-500); }

        .nav-item-new {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        .nav-item-new:hover { background: rgba(139, 92, 246, 0.3); }

        .sidebar-footer { padding: 16px; border-top: 1px solid rgba(255,255,255,0.08); }

        .user-card {
            display: flex; align-items: center; gap: 12px;
            padding: 8px; border-radius: var(--radius-md); cursor: pointer;
        }
        .user-card:hover { background: rgba(255,255,255,0.08); }

        .user-avatar {
            width: 36px; height: 36px; background: var(--indigo-600);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: #fff; font-weight: 600; font-size: 14px;
        }

        .user-name { font-size: 13px; font-weight: 600; color: #fff; }
        .user-role { font-size: 12px; color: rgba(255,255,255,0.5); }

        /* ==================== MAIN ==================== */
        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

        .topbar {
            height: 64px; background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 32px; flex-shrink: 0;
        }

        .page-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }

        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            padding: 10px 16px; font-size: 14px; font-weight: 600;
            border-radius: var(--radius-md); cursor: pointer;
            transition: all 0.15s ease; border: none; font-family: inherit;
        }
        .btn svg { width: 18px; height: 18px; }
        .btn-primary { background: var(--indigo-600); color: #fff; }
        .btn-primary:hover { background: var(--indigo-700); }
        .btn-secondary { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); }
        .btn-secondary:hover { background: var(--bg-secondary); }

        .content { flex: 1; overflow-y: auto; padding: 32px; }

        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

        /* ==================== STATS ==================== */
        .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }

        .stat-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            padding: 20px 24px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
        }

        .stat-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
        .stat-label { font-size: 13px; font-weight: 500; color: var(--text-secondary); }

        .stat-icon {
            width: 40px; height: 40px; border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }
        .stat-icon svg { width: 20px; height: 20px; }
        .stat-icon.indigo { background: var(--indigo-50); color: var(--indigo-600); }
        .stat-icon.emerald { background: var(--emerald-50); color: var(--emerald-600); }
        .stat-icon.amber { background: var(--amber-50); color: var(--amber-600); }
        .stat-icon.red { background: var(--red-50); color: var(--red-600); }

        .stat-value { font-size: 32px; font-weight: 700; color: var(--text-primary); letter-spacing: -1px; line-height: 1; margin-bottom: 8px; }
        .stat-trend { display: inline-flex; align-items: center; gap: 4px; font-size: 12px; font-weight: 600; }
        .stat-trend.positive { color: var(--emerald-600); }
        .stat-trend.negative { color: var(--red-600); }

        /* ==================== CARDS ==================== */
        .card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); overflow: hidden;
        }

        .card-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px 24px; border-bottom: 1px solid var(--border-light);
        }

        .card-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .card-body { padding: 20px 24px; }

        /* ==================== FLOOR MAP ==================== */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 380px; gap: 24px; }

        .legend { display: flex; gap: 20px; }
        .legend-item { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-secondary); }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
        .legend-dot.urgent { background: var(--red-500); }
        .legend-dot.pending { background: var(--amber-500); }
        .legend-dot.resolved { background: var(--emerald-500); }
        .legend-dot.staff { background: var(--blue-500); }

        .floor-list { max-height: 520px; overflow-y: auto; }

        .floor-row {
            display: flex; align-items: center; gap: 12px;
            padding: 4px 0; cursor: pointer; border-radius: var(--radius-sm); transition: background 0.1s;
        }
        .floor-row:hover { background: var(--bg-secondary); }
        .floor-row.selected { background: #fef9c3; }

        .floor-label { width: 36px; font-size: 13px; font-weight: 600; color: var(--text-secondary); text-align: right; }

        .floor-bar-container { flex: 1; position: relative; }
        .floor-bar { height: 24px; border-radius: 4px; position: relative; }
        .floor-bar.level-0 { background: #e0e7ff; }
        .floor-bar.level-1 { background: #c7d2fe; }
        .floor-bar.level-2 { background: #ddd6fe; }
        .floor-bar.level-3 { background: #f5d0fe; }
        .floor-bar.level-4 { background: #fbcfe8; }

        .floor-dot {
            position: absolute; width: 12px; height: 12px; border-radius: 50%;
            top: 50%; transform: translateY(-50%);
            border: 2px solid #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.15); z-index: 1;
        }
        .floor-dot.urgent { background: var(--red-500); }
        .floor-dot.pending { background: var(--amber-500); }
        .floor-dot.resolved { background: var(--emerald-500); }
        .floor-dot.staff { background: var(--blue-500); }

        .floor-summary { display: flex; gap: 3px; width: 56px; justify-content: flex-end; padding-right: 4px; }
        .mini-dot { width: 8px; height: 8px; border-radius: 50%; }
        .mini-dot.urgent { background: var(--red-500); }
        .mini-dot.pending { background: var(--amber-500); }
        .mini-dot.resolved { background: var(--emerald-500); }
        .mini-dot.staff { background: var(--blue-500); }

        /* Detail Panel */
        .floor-detail-panel {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); height: fit-content;
        }

        .detail-header { padding: 24px; border-bottom: 1px solid var(--border-light); }
        .detail-floor-num { font-size: 28px; font-weight: 800; color: var(--text-primary); letter-spacing: -1px; }
        .detail-subtitle { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }

        .detail-stats { padding: 20px 24px; border-bottom: 1px solid var(--border-light); }
        .detail-stat-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; }
        .detail-stat-label { font-size: 14px; color: var(--text-secondary); }
        .detail-stat-value { font-size: 14px; font-weight: 600; }
        .detail-stat-value.urgent { color: var(--red-600); }
        .detail-stat-value.pending { color: var(--amber-600); }
        .detail-stat-value.resolved { color: var(--emerald-600); }

        .detail-incidents { padding: 20px 24px; }
        .detail-section-title {
            font-size: 12px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;
        }

        .incident-card {
            padding: 14px 16px; background: var(--bg-secondary);
            border-radius: var(--radius-md); border-left: 4px solid; margin-bottom: 10px;
        }
        .incident-card.urgent { border-left-color: var(--red-500); }
        .incident-card.pending { border-left-color: var(--amber-500); }
        .incident-card.resolved { border-left-color: var(--emerald-500); }

        .incident-title { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .incident-status { font-size: 12px; color: var(--text-secondary); }

        .empty-state { text-align: center; padding: 60px 24px; color: var(--text-muted); }
        .empty-state svg { width: 48px; height: 48px; margin-bottom: 16px; opacity: 0.4; }

        .ai-insight {
            margin: 16px 24px; padding: 14px 16px;
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border-radius: var(--radius-md); border: 1px solid #e9d5ff;
        }
        .ai-insight-header {
            display: flex; align-items: center; gap: 8px;
            font-size: 11px; font-weight: 700; color: #7c3aed;
            text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;
        }
        .ai-insight-text { font-size: 13px; color: #5b21b6; font-weight: 500; }

        /* ==================== ORDERS ==================== */
        .filters-bar { display: flex; gap: 8px; margin-bottom: 20px; }

        .filter-btn {
            padding: 8px 16px; font-size: 13px; font-weight: 500;
            color: var(--text-secondary); background: var(--bg-primary);
            border: 1px solid var(--border); border-radius: var(--radius-md);
            cursor: pointer; transition: all 0.15s;
        }
        .filter-btn:hover { border-color: var(--text-muted); }
        .filter-btn.active { background: var(--indigo-600); color: #fff; border-color: var(--indigo-600); }

        .orders-table {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); overflow: hidden;
        }

        .table-header {
            display: grid; grid-template-columns: 1fr 160px 140px 120px 100px;
            gap: 16px; padding: 14px 24px; background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            font-size: 12px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px;
        }

        .table-row {
            display: grid; grid-template-columns: 1fr 160px 140px 120px 100px;
            gap: 16px; padding: 16px 24px; border-bottom: 1px solid var(--border-light);
            align-items: center; transition: background 0.1s;
        }
        .table-row:hover { background: var(--bg-secondary); }
        .table-row:last-child { border-bottom: none; }

        .order-title { font-weight: 600; color: var(--text-primary); }
        .order-location { font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

        .order-assignee { display: flex; align-items: center; gap: 10px; }
        .assignee-avatar {
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 600;
        }

        .status-badge {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;
        }
        .status-badge.urgent { background: var(--red-50); color: var(--red-600); }
        .status-badge.pending { background: var(--amber-50); color: var(--amber-600); }
        .status-badge.in-progress { background: var(--indigo-50); color: var(--indigo-600); }
        .status-badge.resolved { background: var(--emerald-50); color: var(--emerald-600); }

        .status-dot { width: 8px; height: 8px; border-radius: 50%; }
        .status-badge.urgent .status-dot { background: var(--red-500); }
        .status-badge.pending .status-dot { background: var(--amber-500); }
        .status-badge.in-progress .status-dot { background: var(--indigo-500); }
        .status-badge.resolved .status-dot { background: var(--emerald-500); }

        .priority-indicator { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 6px; }
        .priority-indicator.high { background: var(--red-500); }
        .priority-indicator.medium { background: var(--amber-500); }
        .priority-indicator.low { background: var(--emerald-500); }

        .time-ago { font-size: 13px; color: var(--text-secondary); }

        /* ==================== TEAM ==================== */
        .team-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .team-stats { display: flex; gap: 32px; }
        .team-stat-value { font-size: 28px; font-weight: 700; color: var(--text-primary); }
        .team-stat-label { font-size: 13px; color: var(--text-secondary); }

        .team-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }

        .team-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            padding: 24px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
        }

        .team-card-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }

        .team-avatar {
            width: 52px; height: 52px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 18px; position: relative;
        }
        .team-avatar.online::after {
            content: ''; position: absolute; bottom: 2px; right: 2px;
            width: 14px; height: 14px; background: var(--emerald-500);
            border: 3px solid var(--bg-primary); border-radius: 50%;
        }

        .team-name { font-size: 16px; font-weight: 600; color: var(--text-primary); }
        .team-role { font-size: 13px; color: var(--text-secondary); }
        .team-location {
            display: flex; align-items: center; gap: 6px;
            font-size: 12px; color: var(--indigo-600); font-weight: 500; margin-top: 4px;
        }

        .team-metrics {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
            padding-top: 20px; border-top: 1px solid var(--border-light);
        }
        .team-metric { text-align: center; }
        .team-metric-value { font-size: 20px; font-weight: 700; color: var(--text-primary); }
        .team-metric-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px; }

        /* ==================== WHATSAPP AI ==================== */
        .whatsapp-demo { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }

        .phone-mockup {
            background: #075e54; border-radius: 32px; padding: 12px;
            box-shadow: var(--shadow-lg); max-width: 320px; margin: 0 auto;
        }

        .phone-screen { background: #ece5dd; border-radius: 24px; overflow: hidden; }

        .phone-header {
            background: #075e54; color: white; padding: 12px 16px;
            display: flex; align-items: center; gap: 12px;
        }
        .phone-header-avatar { width: 36px; height: 36px; background: #128c7e; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .phone-header-name { font-weight: 600; font-size: 15px; }
        .phone-header-status { font-size: 12px; opacity: 0.8; }

        .chat-messages { padding: 16px; min-height: 300px; }

        .chat-bubble {
            max-width: 85%; padding: 10px 14px; border-radius: 12px;
            margin-bottom: 12px; font-size: 14px; position: relative;
        }
        .chat-bubble.sent { background: #dcf8c6; margin-left: auto; border-bottom-right-radius: 4px; }
        .chat-bubble.received { background: white; margin-right: auto; border-bottom-left-radius: 4px; }
        .chat-time { font-size: 11px; color: #667781; text-align: right; margin-top: 4px; }

        .voice-message {
            display: flex; align-items: center; gap: 12px; padding: 8px 12px;
            background: #dcf8c6; border-radius: 12px; max-width: 85%; margin-left: auto; margin-bottom: 12px;
        }
        .voice-play { width: 32px; height: 32px; background: #075e54; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .voice-play svg { color: white; width: 14px; height: 14px; }
        .voice-waves { flex: 1; height: 24px; display: flex; align-items: center; gap: 2px; }
        .voice-bar { width: 3px; background: #075e54; border-radius: 2px; animation: wave 1s ease-in-out infinite; }
        .voice-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
        .voice-bar:nth-child(2) { height: 16px; animation-delay: 0.1s; }
        .voice-bar:nth-child(3) { height: 12px; animation-delay: 0.2s; }
        .voice-bar:nth-child(4) { height: 20px; animation-delay: 0.3s; }
        .voice-bar:nth-child(5) { height: 14px; animation-delay: 0.4s; }
        .voice-bar:nth-child(6) { height: 18px; animation-delay: 0.5s; }
        .voice-bar:nth-child(7) { height: 10px; animation-delay: 0.6s; }
        .voice-bar:nth-child(8) { height: 22px; animation-delay: 0.7s; }
        .voice-bar:nth-child(9) { height: 14px; animation-delay: 0.8s; }
        .voice-bar:nth-child(10) { height: 8px; animation-delay: 0.9s; }
        @keyframes wave { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(0.5); } }
        .voice-duration { font-size: 12px; color: #667781; }

        .ai-process { padding: 32px; }
        .ai-process h3 { font-size: 20px; font-weight: 700; margin-bottom: 24px; color: var(--text-primary); }

        .process-step {
            display: flex; gap: 16px; margin-bottom: 24px; padding: 20px;
            background: var(--bg-secondary); border-radius: var(--radius-lg);
        }
        .step-number {
            width: 32px; height: 32px; background: var(--indigo-600); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 14px; flex-shrink: 0;
        }
        .step-content h4 { font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .step-content p { font-size: 13px; color: var(--text-secondary); }
        .step-result {
            margin-top: 8px; padding: 8px 12px; background: var(--indigo-50);
            border-radius: var(--radius-sm); font-size: 13px; color: var(--indigo-700); font-weight: 500;
        }

        .whatsapp-tagline {
            text-align: center; padding: 32px;
            font-size: 24px; font-weight: 700; color: var(--text-primary);
        }
        .whatsapp-tagline span { color: #25d366; }

        /* ==================== LIVE TRACKING ==================== */
        .tracking-grid { display: grid; grid-template-columns: 1fr 400px; gap: 24px; }

        .tracking-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            padding: 24px;
        }

        .tracking-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
        .tracking-avatar {
            width: 64px; height: 64px; border-radius: 50%;
            background: var(--indigo-100); color: var(--indigo-600);
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 24px;
        }
        .tracking-tech-name { font-size: 20px; font-weight: 700; color: var(--text-primary); }
        .tracking-tech-role { font-size: 14px; color: var(--text-secondary); }
        .tracking-eta {
            margin-left: auto; padding: 8px 16px;
            background: var(--emerald-50); color: var(--emerald-600);
            border-radius: var(--radius-md); font-weight: 600;
        }

        .tracking-progress { margin-bottom: 24px; }
        .progress-steps { display: flex; justify-content: space-between; position: relative; }
        .progress-steps::before {
            content: ''; position: absolute; top: 15px; left: 40px; right: 40px;
            height: 4px; background: var(--bg-tertiary); z-index: 0;
        }
        .progress-step { text-align: center; position: relative; z-index: 1; flex: 1; }
        .step-icon {
            width: 32px; height: 32px; border-radius: 50%; margin: 0 auto 8px;
            display: flex; align-items: center; justify-content: center;
            background: var(--bg-tertiary); color: var(--text-muted);
        }
        .step-icon svg { width: 16px; height: 16px; }
        .progress-step.completed .step-icon { background: var(--emerald-500); color: white; }
        .progress-step.current .step-icon {
            background: var(--indigo-600); color: white;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); } 50% { box-shadow: 0 0 0 8px rgba(79, 70, 229, 0); } }
        .step-label { font-size: 12px; color: var(--text-secondary); }
        .progress-step.completed .step-label, .progress-step.current .step-label { color: var(--text-primary); font-weight: 500; }

        .tracking-order {
            padding: 20px; background: var(--bg-secondary); border-radius: var(--radius-lg);
        }
        .tracking-order-title { font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .tracking-order-location { font-size: 13px; color: var(--text-secondary); }

        .tracking-map {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            border-radius: var(--radius-lg); height: 300px;
            display: flex; align-items: center; justify-content: center;
            position: relative; overflow: hidden;
        }
        .map-building {
            font-size: 48px; opacity: 0.3;
        }
        .map-marker {
            position: absolute; width: 40px; height: 40px;
            background: var(--indigo-600); border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg); display: flex; align-items: center; justify-content: center;
            animation: bounce 1s ease infinite;
        }
        .map-marker span { transform: rotate(45deg); color: white; font-weight: 700; font-size: 14px; }
        @keyframes bounce { 0%, 100% { transform: rotate(-45deg) translateY(0); } 50% { transform: rotate(-45deg) translateY(-10px); } }

        /* ==================== PREDICTIVE AI ==================== */
        .predictions-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 24px; }

        .prediction-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            overflow: hidden;
        }

        .prediction-header {
            padding: 20px 24px; border-bottom: 1px solid var(--border-light);
            display: flex; align-items: center; gap: 16px;
        }
        .prediction-icon {
            width: 48px; height: 48px; border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
        }
        .prediction-icon.warning { background: var(--amber-50); color: var(--amber-600); }
        .prediction-icon.critical { background: var(--red-50); color: var(--red-600); }
        .prediction-icon svg { width: 24px; height: 24px; }

        .prediction-title { font-weight: 600; color: var(--text-primary); }
        .prediction-subtitle { font-size: 13px; color: var(--text-secondary); }

        .prediction-badge {
            margin-left: auto; padding: 6px 12px; border-radius: 20px;
            font-size: 13px; font-weight: 700;
        }
        .prediction-badge.high { background: var(--red-50); color: var(--red-600); }
        .prediction-badge.medium { background: var(--amber-50); color: var(--amber-600); }

        .prediction-body { padding: 24px; }

        .prediction-reason {
            padding: 12px 16px; background: var(--bg-secondary);
            border-radius: var(--radius-md); font-size: 13px; color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .cost-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
        .cost-box {
            padding: 16px; border-radius: var(--radius-md); text-align: center;
        }
        .cost-box.preventive { background: var(--emerald-50); }
        .cost-box.failure { background: var(--red-50); }
        .cost-label { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
        .cost-value { font-size: 24px; font-weight: 700; }
        .cost-box.preventive .cost-value { color: var(--emerald-600); }
        .cost-box.failure .cost-value { color: var(--red-600); }

        .savings-box {
            padding: 16px; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-radius: var(--radius-md); text-align: center; border: 1px solid #a7f3d0;
        }
        .savings-label { font-size: 13px; color: var(--emerald-700); margin-bottom: 4px; }
        .savings-value { font-size: 28px; font-weight: 800; color: var(--emerald-600); }

        .prediction-footer { padding: 16px 24px; border-top: 1px solid var(--border-light); }

        /* ==================== COMPLIANCE ==================== */
        .compliance-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .compliance-stats { display: flex; gap: 32px; }
        .compliance-stat {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 20px; background: var(--bg-primary);
            border-radius: var(--radius-md); box-shadow: var(--shadow-sm);
        }
        .compliance-stat-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .compliance-stat-icon.urgent { background: var(--red-50); color: var(--red-600); }
        .compliance-stat-icon.ok { background: var(--emerald-50); color: var(--emerald-600); }
        .compliance-stat-value { font-size: 24px; font-weight: 700; }
        .compliance-stat-label { font-size: 12px; color: var(--text-secondary); }

        .compliance-timeline {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            padding: 24px;
        }

        .timeline-item {
            display: flex; gap: 16px; padding: 16px 0;
            border-bottom: 1px solid var(--border-light);
        }
        .timeline-item:last-child { border-bottom: none; }

        .timeline-indicator {
            width: 12px; height: 12px; border-radius: 50%; margin-top: 4px;
            box-shadow: 0 0 0 4px rgba(0,0,0,0.05);
        }
        .timeline-indicator.urgent { background: var(--red-500); box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2); }
        .timeline-indicator.warning { background: var(--amber-500); box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.2); }
        .timeline-indicator.ok { background: var(--emerald-500); box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2); }

        .timeline-content { flex: 1; }
        .timeline-title { font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
        .timeline-date { font-size: 13px; color: var(--text-secondary); }

        .timeline-days {
            padding: 6px 12px; border-radius: var(--radius-sm);
            font-size: 13px; font-weight: 600; white-space: nowrap;
        }
        .timeline-days.urgent { background: var(--red-50); color: var(--red-600); }
        .timeline-days.warning { background: var(--amber-50); color: var(--amber-600); }
        .timeline-days.ok { background: var(--emerald-50); color: var(--emerald-600); }

        .compliance-banner {
            margin-top: 24px; padding: 20px 24px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: var(--radius-lg); border: 1px solid #bbf7d0;
            text-align: center;
        }
        .compliance-banner-text { font-size: 16px; font-weight: 600; color: var(--emerald-700); }

        /* ==================== QR ASSETS ==================== */
        .assets-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }

        .asset-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            padding: 24px; text-align: center;
        }

        .qr-code {
            width: 120px; height: 120px; margin: 0 auto 16px;
            background: white; border-radius: var(--radius-md);
            padding: 8px; box-shadow: inset 0 0 0 1px var(--border);
            display: flex; align-items: center; justify-content: center;
        }
        .qr-pattern {
            width: 100%; height: 100%;
            background: 
                linear-gradient(90deg, #000 20%, transparent 20%, transparent 80%, #000 80%),
                linear-gradient(#000 20%, transparent 20%, transparent 80%, #000 80%),
                linear-gradient(90deg, transparent 33%, #000 33%, #000 67%, transparent 67%),
                linear-gradient(transparent 33%, #000 33%, #000 67%, transparent 67%);
            background-size: 10px 10px, 10px 10px, 30px 30px, 30px 30px;
            background-position: 0 0, 0 0, 5px 5px, 5px 5px;
        }

        .asset-name { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .asset-location { font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; }
        .asset-scan-text { font-size: 12px; color: var(--indigo-600); font-weight: 500; }

        .asset-demo-section { margin-top: 32px; }
        .asset-demo-section h3 { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: var(--text-primary); }

        .demo-panels { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .demo-panel {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            overflow: hidden;
        }
        .demo-panel-header {
            padding: 16px 20px; background: var(--bg-secondary);
            font-weight: 600; color: var(--text-primary);
            border-bottom: 1px solid var(--border-light);
        }
        .demo-panel-body { padding: 20px; }

        .mock-form-field {
            margin-bottom: 12px;
        }
        .mock-form-label { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
        .mock-form-value {
            padding: 10px 12px; background: var(--bg-secondary);
            border-radius: var(--radius-sm); font-size: 14px; color: var(--text-primary);
        }

        .history-item {
            display: flex; gap: 12px; padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }
        .history-item:last-child { border-bottom: none; }
        .history-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--indigo-500); margin-top: 6px; }
        .history-text { font-size: 13px; color: var(--text-primary); }
        .history-date { font-size: 12px; color: var(--text-secondary); }

        /* ==================== VENDORS ==================== */
        .vendors-section { margin-bottom: 32px; }
        .vendors-section h3 { font-size: 18px; font-weight: 700; margin-bottom: 20px; color: var(--text-primary); }

        .vendors-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }

        .vendor-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            padding: 20px; display: flex; gap: 16px; align-items: center;
            cursor: pointer; transition: all 0.15s;
        }
        .vendor-card:hover { border-color: var(--indigo-300); box-shadow: var(--shadow-md); }
        .vendor-card.selected { border-color: var(--indigo-500); background: var(--indigo-50); }

        .vendor-logo {
            width: 48px; height: 48px; border-radius: var(--radius-md);
            background: var(--bg-secondary); display: flex; align-items: center; justify-content: center;
            font-weight: 700; color: var(--text-secondary);
        }

        .vendor-name { font-weight: 600; color: var(--text-primary); }
        .vendor-rating { display: flex; align-items: center; gap: 4px; font-size: 13px; color: var(--amber-600); margin: 4px 0; }
        .vendor-meta { font-size: 12px; color: var(--text-secondary); }
        .vendor-price { margin-left: auto; font-weight: 600; color: var(--text-primary); }

        .quotes-comparison {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
            overflow: hidden;
        }

        .quotes-header {
            padding: 20px 24px; background: var(--bg-secondary);
            font-weight: 600; color: var(--text-primary);
            border-bottom: 1px solid var(--border-light);
        }

        .quotes-table { width: 100%; }
        .quotes-table th, .quotes-table td { padding: 16px 24px; text-align: left; }
        .quotes-table th { font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 600; }
        .quotes-table td { border-top: 1px solid var(--border-light); }
        .quotes-table tr:hover td { background: var(--bg-secondary); }

        .quote-vendor { display: flex; align-items: center; gap: 12px; }
        .quote-best { background: var(--emerald-50); color: var(--emerald-600); padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }

        /* ==================== MODAL ==================== */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px); display: none;
            align-items: center; justify-content: center; z-index: 1000; padding: 24px;
        }
        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--bg-primary); border-radius: var(--radius-xl);
            width: 100%; max-width: 520px; box-shadow: var(--shadow-lg);
            animation: modalIn 0.2s ease;
        }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        .modal-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 24px; border-bottom: 1px solid var(--border);
        }
        .modal-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }

        .modal-close {
            width: 36px; height: 36px; border-radius: var(--radius-md);
            border: none; background: transparent; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            color: var(--text-muted); transition: all 0.15s;
        }
        .modal-close:hover { background: var(--bg-secondary); color: var(--text-primary); }

        .modal-body { padding: 24px; }

        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 13px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 12px 14px; font-size: 14px;
            border: 1px solid var(--border); border-radius: var(--radius-md);
            background: var(--bg-primary); color: var(--text-primary);
            font-family: inherit; transition: border-color 0.15s, box-shadow 0.15s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none; border-color: var(--indigo-500);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        .form-textarea { min-height: 100px; resize: vertical; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

        .modal-footer {
            display: flex; justify-content: flex-end; gap: 12px;
            padding: 20px 24px; border-top: 1px solid var(--border);
            background: var(--bg-secondary); border-radius: 0 0 var(--radius-xl) var(--radius-xl);
        }

        /* ==================== CONFIG ==================== */
        .config-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }

        .config-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light);
        }
        .config-card-header { padding: 20px 24px; border-bottom: 1px solid var(--border-light); }
        .config-card-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .config-card-body { padding: 8px 0; }

        .config-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 24px; }
        .config-label { font-size: 14px; color: var(--text-secondary); }
        .config-value { font-size: 14px; font-weight: 500; color: var(--text-primary); }

        .toggle {
            width: 44px; height: 24px; background: var(--bg-tertiary);
            border-radius: 12px; position: relative; cursor: pointer; transition: background 0.2s;
        }
        .toggle.active { background: var(--emerald-500); }
        .toggle::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: #fff; border-radius: 50%; top: 2px; left: 2px;
            transition: transform 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .toggle.active::after { transform: translateX(20px); }

        /* ==================== REPORTS ==================== */
        .report-container { max-width: 900px; }

        .report-card {
            background: var(--bg-primary); border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm); border: 1px solid var(--border-light); overflow: hidden;
        }
        .report-header { padding: 32px; text-align: center; border-bottom: 1px solid var(--border-light); }
        .report-title { font-size: 24px; font-weight: 700; color: var(--text-primary); }
        .report-period { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }

        .report-stats { display: grid; grid-template-columns: repeat(4, 1fr); border-bottom: 1px solid var(--border-light); }
        .report-stat { padding: 24px; text-align: center; border-right: 1px solid var(--border-light); }
        .report-stat:last-child { border-right: none; }
        .report-stat-value { font-size: 32px; font-weight: 800; color: var(--indigo-600); letter-spacing: -1px; }
        .report-stat-label { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }

        .report-body { padding: 32px; }
        .report-section { margin-bottom: 32px; }
        .report-section:last-child { margin-bottom: 0; }
        .report-section-title { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 16px; }

        .category-bar { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .category-label { width: 120px; font-size: 13px; color: var(--text-secondary); }
        .category-track { flex: 1; height: 24px; background: var(--bg-secondary); border-radius: 4px; overflow: hidden; }
        .category-fill { height: 100%; background: var(--indigo-500); border-radius: 4px; }
        .category-value { width: 50px; text-align: right; font-size: 14px; font-weight: 600; color: var(--text-primary); }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            border: 1px solid var(--border);
            animation: toastIn 0.3s ease;
            min-width: 320px;
        }

        .toast.success { border-left: 4px solid var(--emerald-500); }
        .toast.error { border-left: 4px solid var(--red-500); }
        .toast.warning { border-left: 4px solid var(--amber-500); }

        .toast-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .toast.success .toast-icon { background: var(--emerald-50); color: var(--emerald-600); }
        .toast.error .toast-icon { background: var(--red-50); color: var(--red-600); }
        .toast.warning .toast-icon { background: var(--amber-50); color: var(--amber-600); }

        .toast-icon svg { width: 14px; height: 14px; }

        .toast-content { flex: 1; }
        .toast-title { font-weight: 600; color: var(--text-primary); font-size: 14px; }
        .toast-message { font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
        }
        .toast-close:hover { color: var(--text-primary); }

        @keyframes toastIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes toastOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(100%); }
        }

        .toast.removing { animation: toastOut 0.3s ease forwards; }

        /* Order Detail Drawer */
        .drawer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.4);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .drawer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .drawer {
            position: fixed;
            top: 0;
            right: 0;
            width: 480px;
            height: 100vh;
            background: var(--bg-primary);
            box-shadow: -10px 0 40px rgba(0,0,0,0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            z-index: 1001;
        }

        .drawer-overlay.active .drawer {
            transform: translateX(0);
        }

        .drawer-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .drawer-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .drawer-close {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .drawer-close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .drawer-section {
            margin-bottom: 24px;
        }

        .drawer-section-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .drawer-info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .drawer-info-row:last-child {
            border-bottom: none;
        }

        .drawer-info-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .drawer-info-value {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .drawer-timeline {
            position: relative;
            padding-left: 24px;
        }

        .drawer-timeline::before {
            content: '';
            position: absolute;
            left: 5px;
            top: 8px;
            bottom: 8px;
            width: 2px;
            background: var(--border);
        }

        .timeline-event {
            position: relative;
            padding-bottom: 16px;
        }

        .timeline-event:last-child {
            padding-bottom: 0;
        }

        .timeline-event::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-primary);
            border: 2px solid var(--indigo-500);
        }

        .timeline-event.completed::before {
            background: var(--emerald-500);
            border-color: var(--emerald-500);
        }

        .timeline-event-title {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 14px;
        }

        .timeline-event-time {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .drawer-footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
        }

        .table-row { cursor: pointer; }

        /* Floor Dot Tooltips */
        .floor-dot {
            position: absolute;
            cursor: pointer;
        }

        .floor-dot-tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-primary);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.15s ease;
            z-index: 100;
            pointer-events: none;
        }

        .floor-dot-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--text-primary);
        }

        .floor-dot:hover .floor-dot-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* ROI Summary Banner */
        .roi-banner {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 1px solid #a7f3d0;
            border-radius: var(--radius-lg);
            padding: 24px 32px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .roi-banner-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .roi-banner-icon {
            width: 56px;
            height: 56px;
            background: var(--emerald-500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .roi-banner-icon svg {
            width: 28px;
            height: 28px;
        }

        .roi-banner-label {
            font-size: 14px;
            color: var(--emerald-700);
            font-weight: 500;
        }

        .roi-banner-value {
            font-size: 36px;
            font-weight: 800;
            color: var(--emerald-600);
            letter-spacing: -1px;
        }

        .roi-banner-detail {
            font-size: 13px;
            color: var(--emerald-700);
            max-width: 280px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>Mantto</h1>
                        <span>Torre Reforma 115</span>
                    </div>
                </div>
            </div>

            <nav class="nav">
                <div class="nav-section">
                    <div class="nav-section-label">Principal</div>
                    <div class="nav-item active" data-view="dashboard">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/></svg>
                        Dashboard
                    </div>
                    <div class="nav-item" data-view="orders">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                        Órdenes de Trabajo
                        <span class="nav-badge">12</span>
                    </div>
                    <div class="nav-item" data-view="tracking">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        Seguimiento en Vivo
                    </div>
                    <div class="nav-item" data-view="team">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                        Equipo
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Inteligencia</div>
                    <div class="nav-item nav-item-new" data-view="whatsapp">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                        WhatsApp IA
                    </div>
                    <div class="nav-item nav-item-new" data-view="predictive">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                        IA Predictiva
                    </div>
                    <div class="nav-item" data-view="compliance">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                        Cumplimiento
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Recursos</div>
                    <div class="nav-item" data-view="assets">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/></svg>
                        Activos QR
                    </div>
                    <div class="nav-item" data-view="vendors">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
                        Proveedores
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Sistema</div>
                    <div class="nav-item" data-view="reports">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                        Reportes
                    </div>
                    <div class="nav-item" data-view="config">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        Configuración
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar">JM</div>
                    <div class="user-info">
                        <div class="user-name">José Martínez</div>
                        <div class="user-role">Administrador</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <div class="topbar">
                <div class="topbar-left">
                    <span class="page-title" id="pageTitle">Dashboard</span>
                </div>
                <div class="topbar-right">
                    <span id="currentTime" style="color: var(--text-secondary); font-size: 14px; margin-right: 16px;"></span>
                    <button class="btn btn-primary" onclick="openModal()">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
                        Nueva Orden
                    </button>
                </div>
            </div>

            <div class="content">
                <!-- Dashboard -->
                <section class="view active" id="dashboard">
                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Órdenes Abiertas</span>
                                <div class="stat-icon red"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">12</div>
                            <span class="stat-trend negative">↑ 2 vs ayer</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Tiempo Promedio</span>
                                <div class="stat-icon amber"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">2.3h</div>
                            <span class="stat-trend positive">↓ 15% vs mes</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Tasa Resolución</span>
                                <div class="stat-icon emerald"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">98%</div>
                            <span class="stat-trend positive">↑ 3% vs mes</span>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-label">Gasto Mensual</span>
                                <div class="stat-icon indigo"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                            </div>
                            <div class="stat-value">$47.2k</div>
                            <span class="stat-trend negative">↑ 5% vs mes</span>
                        </div>
                    </div>
                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Vista de pisos</h3>
                                <div class="legend">
                                    <div class="legend-item"><div class="legend-dot urgent"></div> Urgente</div>
                                    <div class="legend-item"><div class="legend-dot pending"></div> Pendiente</div>
                                    <div class="legend-item"><div class="legend-dot resolved"></div> Resuelto</div>
                                    <div class="legend-item"><div class="legend-dot staff"></div> Personal</div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="floor-list" id="floorList"></div>
                            </div>
                        </div>
                        <div class="floor-detail-panel" id="floorDetailPanel">
                            <div class="empty-state">
                                <svg fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z"/></svg>
                                <p>Selecciona un piso para<br>ver los detalles</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Orders -->
                <section class="view" id="orders">
                    <div class="filters-bar">
                        <button class="filter-btn active" data-filter="all">Todas (12)</button>
                        <button class="filter-btn" data-filter="urgent">Urgentes (3)</button>
                        <button class="filter-btn" data-filter="in-progress">En Progreso (4)</button>
                        <button class="filter-btn" data-filter="pending">Pendientes (5)</button>
                    </div>
                    <div class="orders-table">
                        <div class="table-header">
                            <div>Descripción</div><div>Asignado a</div><div>Estado</div><div>Prioridad</div><div>Tiempo</div>
                        </div>
                        <div id="ordersTableBody"></div>
                    </div>
                </section>

                <!-- Live Tracking -->
                <section class="view" id="tracking">
                    <div class="tracking-grid">
                        <div>
                            <div class="tracking-card" style="margin-bottom: 24px;">
                                <div class="tracking-header">
                                    <div class="tracking-avatar">MH</div>
                                    <div>
                                        <div class="tracking-tech-name">Miguel Hernández</div>
                                        <div class="tracking-tech-role">Técnico HVAC</div>
                                    </div>
                                    <div class="tracking-eta">ETA ~5 min</div>
                                </div>
                                <div class="tracking-progress">
                                    <div class="progress-steps">
                                        <div class="progress-step completed">
                                            <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                            <div class="step-label">Asignado</div>
                                        </div>
                                        <div class="progress-step completed">
                                            <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                            <div class="step-label">En camino</div>
                                        </div>
                                        <div class="progress-step current">
                                            <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg></div>
                                            <div class="step-label">Llegando</div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/></svg></div>
                                            <div class="step-label">Trabajando</div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="step-icon"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></div>
                                            <div class="step-label">Completado</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tracking-order">
                                    <div class="tracking-order-title">HVAC no enfría correctamente</div>
                                    <div class="tracking-order-location">Piso 12, Oficina 1205</div>
                                </div>
                            </div>
                        </div>
                        <div class="tracking-map">
                            <div class="map-building">🏢</div>
                            <div class="map-marker" style="top: 35%; left: 55%;"><span>MH</span></div>
                        </div>
                    </div>
                </section>

                <!-- Team -->
                <section class="view" id="team">
                    <div class="team-header">
                        <div class="team-stats">
                            <div><div class="team-stat-value">10</div><div class="team-stat-label">Personal Total</div></div>
                            <div><div class="team-stat-value">8</div><div class="team-stat-label">En Servicio</div></div>
                            <div><div class="team-stat-value">23</div><div class="team-stat-label">Tareas Hoy</div></div>
                        </div>
                    </div>
                    <div class="team-grid" id="teamGrid"></div>
                </section>

                <!-- WhatsApp AI -->
                <section class="view" id="whatsapp">
                    <div class="whatsapp-tagline">Tu equipo solo habla. <span>La IA crea el ticket.</span></div>
                    <div class="whatsapp-demo">
                        <div class="phone-mockup">
                            <div class="phone-screen">
                                <div class="phone-header">
                                    <div class="phone-header-avatar"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="width:20px;height:20px;color:white"><path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg></div>
                                    <div><div class="phone-header-name">Mantto Bot</div><div class="phone-header-status">en línea</div></div>
                                </div>
                                <div class="chat-messages">
                                    <div class="voice-message">
                                        <div class="voice-play"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                                        <div class="voice-waves">
                                            <div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div>
                                            <div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div><div class="voice-bar"></div>
                                        </div>
                                        <div class="voice-duration">0:04</div>
                                    </div>
                                    <div class="chat-bubble received">
                                        <strong>Ticket #847 creado</strong><br><br>
                                        📍 Piso 12, Oficina 1205<br>
                                        🏷️ HVAC<br>
                                        ⚡ Prioridad: Alta<br>
                                        👤 Asignado: Miguel H.
                                        <div class="chat-time">14:32 ✓✓</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ai-process">
                            <h3>Cómo funciona</h3>
                            <div class="process-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Nota de voz</h4>
                                    <p>El inquilino envía: "El aire acondicionado del piso 12 no está enfriando"</p>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>IA Transcribe y Analiza</h4>
                                    <p>Detecta categoría, ubicación y urgencia automáticamente</p>
                                    <div class="step-result">HVAC → Piso 12 → Prioridad Alta</div>
                                </div>
                            </div>
                            <div class="process-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Ticket Creado y Asignado</h4>
                                    <p>Se asigna al técnico disponible más cercano con las habilidades correctas</p>
                                    <div class="step-result">Miguel Hernández notificado vía WhatsApp</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Predictive AI -->
                <section class="view" id="predictive">
                    <div class="roi-banner">
                        <div class="roi-banner-content">
                            <div class="roi-banner-icon">
                                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="roi-banner-label">Ahorro potencial identificado</div>
                                <div class="roi-banner-value">$264,500 MXN</div>
                            </div>
                        </div>
                        <div class="roi-banner-detail">
                            3 equipos en riesgo detectados. Reparar antes de que fallen puede ahorrar hasta 85% del costo de emergencia.
                        </div>
                    </div>
                    <div class="predictions-grid">
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon critical"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">HVAC Unidad 12-A</div><div class="prediction-subtitle">Piso 12, Zona Norte</div></div>
                                <div class="prediction-badge high">87% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: antigüedad del equipo (8 años), historial de fallas similares, patrón de consumo eléctrico anormal</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Reparación preventiva</div><div class="cost-value">$8,500</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Si falla completamente</div><div class="cost-value">$45,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$36,500 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%">Programar Mantenimiento Preventivo</button></div>
                        </div>
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon warning"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">Bomba de Agua #2</div><div class="prediction-subtitle">Cuarto de Máquinas</div></div>
                                <div class="prediction-badge medium">72% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: vibración anormal detectada, último mantenimiento hace 14 meses, vida útil estimada</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Reparación preventiva</div><div class="cost-value">$12,000</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Si falla completamente</div><div class="cost-value">$85,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$73,000 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%">Programar Mantenimiento Preventivo</button></div>
                        </div>
                        <div class="prediction-card">
                            <div class="prediction-header">
                                <div class="prediction-icon warning"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="prediction-title">Elevador B - Motor</div><div class="prediction-subtitle">Sistema de Elevadores</div></div>
                                <div class="prediction-badge medium">64% prob. falla</div>
                            </div>
                            <div class="prediction-body">
                                <div class="prediction-reason">Basado en: 180,000 ciclos desde último servicio, ruido reportado por usuarios, análisis de aceite</div>
                                <div class="cost-comparison">
                                    <div class="cost-box preventive"><div class="cost-label">Servicio preventivo</div><div class="cost-value">$25,000</div></div>
                                    <div class="cost-box failure"><div class="cost-label">Reemplazo de motor</div><div class="cost-value">$180,000</div></div>
                                </div>
                                <div class="savings-box"><div class="savings-label">Ahorro potencial</div><div class="savings-value">$155,000 MXN</div></div>
                            </div>
                            <div class="prediction-footer"><button class="btn btn-primary" style="width:100%">Programar Mantenimiento Preventivo</button></div>
                        </div>
                    </div>
                </section>

                <!-- Compliance -->
                <section class="view" id="compliance">
                    <div class="compliance-header">
                        <div class="compliance-stats">
                            <div class="compliance-stat">
                                <div class="compliance-stat-icon urgent"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div>
                                <div><div class="compliance-stat-value">2</div><div class="compliance-stat-label">Vencimientos urgentes</div></div>
                            </div>
                            <div class="compliance-stat">
                                <div class="compliance-stat-icon ok"><svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></div>
                                <div><div class="compliance-stat-value">5</div><div class="compliance-stat-label">Cumplidos este año</div></div>
                            </div>
                        </div>
                    </div>
                    <div class="compliance-timeline">
                        <div class="timeline-item">
                            <div class="timeline-indicator urgent"></div>
                            <div class="timeline-content"><div class="timeline-title">Licencia de Funcionamiento</div><div class="timeline-date">Vence: 1 de Marzo, 2026</div></div>
                            <div class="timeline-days urgent">17 días</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-indicator urgent"></div>
                            <div class="timeline-content"><div class="timeline-title">Inspección de Bomberos</div><div class="timeline-date">Vence: 15 de Marzo, 2026</div></div>
                            <div class="timeline-days urgent">31 días</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-indicator warning"></div>
                            <div class="timeline-content"><div class="timeline-title">Fumigación Trimestral</div><div class="timeline-date">Vence: 1 de Abril, 2026</div></div>
                            <div class="timeline-days warning">48 días</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-indicator ok"></div>
                            <div class="timeline-content"><div class="timeline-title">Certificación de Elevadores</div><div class="timeline-date">Vence: 1 de Junio, 2026</div></div>
                            <div class="timeline-days ok">109 días</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-indicator ok"></div>
                            <div class="timeline-content"><div class="timeline-title">Mantenimiento de Cisterna</div><div class="timeline-date">Vence: 15 de Julio, 2026</div></div>
                            <div class="timeline-days ok">153 días</div>
                        </div>
                    </div>
                    <div class="compliance-banner"><div class="compliance-banner-text">Nunca pierdas una fecha legal importante</div></div>
                </section>

                <!-- QR Assets -->
                <section class="view" id="assets">
                    <div class="assets-grid">
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">HVAC Piso 12</div><div class="asset-location">Zona Norte, Unidad 12-A</div><div class="asset-scan-text">Escanear para reportar</div></div>
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">Elevador A</div><div class="asset-location">Lobby Principal</div><div class="asset-scan-text">Escanear para reportar</div></div>
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">Bomba de Agua #2</div><div class="asset-location">Cuarto de Máquinas</div><div class="asset-scan-text">Escanear para reportar</div></div>
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">Generador de Emergencia</div><div class="asset-location">Sótano 2</div><div class="asset-scan-text">Escanear para reportar</div></div>
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">Tablero Eléctrico P15</div><div class="asset-location">Piso 15, Cuarto Técnico</div><div class="asset-scan-text">Escanear para reportar</div></div>
                        <div class="asset-card"><div class="qr-code"><div class="qr-pattern"></div></div><div class="asset-name">Sistema Contra Incendios</div><div class="asset-location">Todos los pisos</div><div class="asset-scan-text">Escanear para reportar</div></div>
                    </div>
                    <div class="asset-demo-section">
                        <h3>Cuando alguien escanea el código:</h3>
                        <div class="demo-panels">
                            <div class="demo-panel">
                                <div class="demo-panel-header">Vista del Inquilino</div>
                                <div class="demo-panel-body">
                                    <div class="mock-form-field"><div class="mock-form-label">Activo</div><div class="mock-form-value">HVAC Piso 12 - Unidad 12-A</div></div>
                                    <div class="mock-form-field"><div class="mock-form-label">Ubicación</div><div class="mock-form-value">Piso 12, Zona Norte</div></div>
                                    <div class="mock-form-field"><div class="mock-form-label">Describe el problema</div><div class="mock-form-value" style="min-height:60px;color:var(--text-muted)">Toca para escribir...</div></div>
                                    <button class="btn btn-primary" style="width:100%;margin-top:12px">Enviar Reporte</button>
                                </div>
                            </div>
                            <div class="demo-panel">
                                <div class="demo-panel-header">Vista del Técnico</div>
                                <div class="demo-panel-body">
                                    <div class="mock-form-field"><div class="mock-form-label">Historial de Mantenimiento</div></div>
                                    <div class="history-item"><div class="history-dot"></div><div><div class="history-text">Cambio de filtros</div><div class="history-date">15 Ene 2026 - Miguel H.</div></div></div>
                                    <div class="history-item"><div class="history-dot"></div><div><div class="history-text">Recarga de gas refrigerante</div><div class="history-date">3 Dic 2025 - Ana G.</div></div></div>
                                    <div class="history-item"><div class="history-dot"></div><div><div class="history-text">Limpieza de serpentín</div><div class="history-date">18 Oct 2025 - Miguel H.</div></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Vendors -->
                <section class="view" id="vendors">
                    <div class="vendors-section">
                        <h3>Proveedores Verificados</h3>
                        <div class="vendors-grid">
                            <div class="vendor-card selected"><div class="vendor-logo">EO</div><div><div class="vendor-name">Elevadores Otis</div><div class="vendor-rating">★★★★★ 4.8</div><div class="vendor-meta">Respuesta: 2h</div></div><div class="vendor-price">$$$$</div></div>
                            <div class="vendor-card"><div class="vendor-logo">ES</div><div><div class="vendor-name">Elevadores Schindler</div><div class="vendor-rating">★★★★☆ 4.6</div><div class="vendor-meta">Respuesta: 4h</div></div><div class="vendor-price">$$$</div></div>
                            <div class="vendor-card"><div class="vendor-logo">PE</div><div><div class="vendor-name">Plomería Express</div><div class="vendor-rating">★★★★☆ 4.5</div><div class="vendor-meta">Respuesta: 1h</div></div><div class="vendor-price">$$</div></div>
                            <div class="vendor-card"><div class="vendor-logo">HS</div><div><div class="vendor-name">HVAC Solutions MX</div><div class="vendor-rating">★★★★★ 4.9</div><div class="vendor-meta">Respuesta: 3h</div></div><div class="vendor-price">$$$</div></div>
                            <div class="vendor-card"><div class="vendor-logo">EF</div><div><div class="vendor-name">ElectroFix CDMX</div><div class="vendor-rating">★★★★☆ 4.7</div><div class="vendor-meta">Respuesta: 2h</div></div><div class="vendor-price">$$</div></div>
                            <div class="vendor-card"><div class="vendor-logo">MI</div><div><div class="vendor-name">Mantenimiento Integral</div><div class="vendor-rating">★★★★☆ 4.4</div><div class="vendor-meta">Respuesta: 6h</div></div><div class="vendor-price">$</div></div>
                        </div>
                    </div>
                    <div class="quotes-comparison">
                        <div class="quotes-header">Cotizaciones Recibidas — Reparación Elevador B</div>
                        <table class="quotes-table">
                            <thead><tr><th>Proveedor</th><th>Precio</th><th>Tiempo</th><th>Garantía</th><th></th></tr></thead>
                            <tbody>
                                <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">EO</div>Elevadores Otis</div></td><td><strong>$28,500</strong></td><td>3 días</td><td>12 meses</td><td><span class="quote-best">Mejor opción</span></td></tr>
                                <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">ES</div>Elevadores Schindler</td></td><td><strong>$32,000</strong></td><td>5 días</td><td>12 meses</td><td></td></tr>
                                <tr><td><div class="quote-vendor"><div class="vendor-logo" style="width:36px;height:36px;font-size:12px">MI</div>Mantenimiento Integral</td></td><td><strong>$24,000</strong></td><td>7 días</td><td>6 meses</td><td></td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Reports -->
                <section class="view" id="reports">
                    <div class="report-container">
                        <div class="report-card">
                            <div class="report-header"><h2 class="report-title">Reporte Mensual de Operaciones</h2><p class="report-period">Febrero 2026 · Torre Reforma 115</p></div>
                            <div class="report-stats">
                                <div class="report-stat"><div class="report-stat-value">156</div><div class="report-stat-label">Total Tickets</div></div>
                                <div class="report-stat"><div class="report-stat-value">2.3h</div><div class="report-stat-label">Tiempo Promedio</div></div>
                                <div class="report-stat"><div class="report-stat-value">98%</div><div class="report-stat-label">Resueltos en 24h</div></div>
                                <div class="report-stat"><div class="report-stat-value">$47.2k</div><div class="report-stat-label">Costo Total</div></div>
                            </div>
                            <div class="report-body">
                                <div class="report-section">
                                    <h3 class="report-section-title">Distribución por Categoría</h3>
                                    <div class="category-bar"><div class="category-label">Plomería</div><div class="category-track"><div class="category-fill" style="width:35%"></div></div><div class="category-value">54</div></div>
                                    <div class="category-bar"><div class="category-label">Electricidad</div><div class="category-track"><div class="category-fill" style="width:25%"></div></div><div class="category-value">39</div></div>
                                    <div class="category-bar"><div class="category-label">HVAC</div><div class="category-track"><div class="category-fill" style="width:20%"></div></div><div class="category-value">31</div></div>
                                    <div class="category-bar"><div class="category-label">Elevadores</div><div class="category-track"><div class="category-fill" style="width:12%"></div></div><div class="category-value">19</div></div>
                                    <div class="category-bar"><div class="category-label">Otros</div><div class="category-track"><div class="category-fill" style="width:8%"></div></div><div class="category-value">13</div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Config -->
                <section class="view" id="config">
                    <div class="config-grid">
                        <div class="config-card">
                            <div class="config-card-header"><h3 class="config-card-title">Información del Edificio</h3></div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">Nombre</span><span class="config-value">Torre Reforma 115</span></div>
                                <div class="config-row"><span class="config-label">Pisos</span><span class="config-value">30</span></div>
                                <div class="config-row"><span class="config-label">Dirección</span><span class="config-value">Paseo de la Reforma 115, CDMX</span></div>
                                <div class="config-row"><span class="config-label">Personal</span><span class="config-value">10 técnicos</span></div>
                            </div>
                        </div>
                        <div class="config-card">
                            <div class="config-card-header"><h3 class="config-card-title">Notificaciones</h3></div>
                            <div class="config-card-body">
                                <div class="config-row"><span class="config-label">WhatsApp</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                                <div class="config-row"><span class="config-label">Email</span><div class="toggle active" onclick="this.classList.toggle('active')"></div></div>
                                <div class="config-row"><span class="config-label">Push Notifications</span><div class="toggle" onclick="this.classList.toggle('active')"></div></div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header"><h2 class="modal-title">Nueva Orden de Trabajo</h2><button class="modal-close" onclick="closeModal()"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg></button></div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Piso</label><select class="form-select"><option>Seleccionar...</option><option>Piso 1</option><option>Piso 5</option><option>Piso 10</option><option>Piso 12</option><option>Piso 15</option><option>Piso 20</option><option>Piso 25</option><option>Piso 30</option></select></div>
                    <div class="form-group"><label class="form-label">Categoría</label><select class="form-select"><option>Seleccionar...</option><option>Plomería</option><option>Electricidad</option><option>HVAC</option><option>Elevadores</option><option>Limpieza</option><option>Otro</option></select></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Prioridad</label><select class="form-select"><option>Normal</option><option>Alta</option><option>Urgente</option></select></div>
                    <div class="form-group"><label class="form-label">Asignar a</label><select class="form-select"><option>Sin asignar</option><option>Miguel Hernández</option><option>Ana García</option><option>Roberto López</option><option>Carmen Ruiz</option></select></div>
                </div>
                <div class="form-group"><label class="form-label">Ubicación específica</label><input type="text" class="form-input" placeholder="Ej: Oficina 1205, Baño común norte..."></div>
                <div class="form-group"><label class="form-label">Descripción del problema</label><textarea class="form-textarea" placeholder="Describe el problema..."></textarea></div>
            </div>
            <div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button class="btn btn-primary" onclick="createOrder()">Crear Orden</button></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Order Detail Drawer -->
    <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()">
        <div class="drawer" onclick="event.stopPropagation()">
            <div class="drawer-header">
                <h3 class="drawer-title">Detalle de Orden</h3>
                <button class="drawer-close" onclick="closeDrawer()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="drawer-body" id="drawerBody">
                <!-- Populated by JS -->
            </div>
            <div class="drawer-footer">
                <button class="btn btn-secondary" style="flex:1" onclick="closeDrawer()">Cerrar</button>
                <button class="btn btn-primary" style="flex:1" onclick="showToast('Estado actualizado', 'Orden marcada como en progreso', 'success'); closeDrawer();">Actualizar Estado</button>
            </div>
        </div>
    </div>

    <script>
        // Toast notification system
        function showToast(title, message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>',
                error: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>',
                warning: '<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>'
            };

            toast.innerHTML = `
                <div class="toast-icon">${icons[type]}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    ${message ? `<div class="toast-message">${message}</div>` : ''}
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            `;

            container.appendChild(toast);

            // Auto-remove after 4 seconds
            setTimeout(() => {
                toast.classList.add('removing');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        const team = [
            { id: 1, name: 'Miguel Hernández', initials: 'MH', role: 'Técnico HVAC', floor: 12, online: true, tasksToday: 4, completed: 3, avgTime: '1.8h' },
            { id: 2, name: 'Ana García', initials: 'AG', role: 'Electricista', floor: 8, online: true, tasksToday: 3, completed: 3, avgTime: '2.1h' },
            { id: 3, name: 'Roberto López', initials: 'RL', role: 'Plomero', floor: 22, online: true, tasksToday: 5, completed: 4, avgTime: '1.5h' },
            { id: 4, name: 'Carmen Ruiz', initials: 'CR', role: 'Técnico General', floor: 15, online: true, tasksToday: 3, completed: 2, avgTime: '2.4h' },
            { id: 5, name: 'José Martínez', initials: 'JM', role: 'Supervisor', floor: 1, online: true, tasksToday: 2, completed: 2, avgTime: '1.2h' },
            { id: 6, name: 'Laura Sánchez', initials: 'LS', role: 'Técnico HVAC', floor: 27, online: true, tasksToday: 4, completed: 3, avgTime: '2.0h' },
            { id: 7, name: 'Pedro Ramírez', initials: 'PR', role: 'Plomero', floor: 5, online: false, tasksToday: 0, completed: 0, avgTime: '1.9h' },
            { id: 8, name: 'María Torres', initials: 'MT', role: 'Electricista', floor: 18, online: true, tasksToday: 3, completed: 2, avgTime: '2.2h' }
        ];

        const orders = [
            { id: 1, title: 'HVAC no enfría correctamente', location: 'Piso 12, Oficina 1205', assignee: team[0], status: 'urgent', priority: 'high', time: '30 min' },
            { id: 2, title: 'Fuga de agua en lavabo', location: 'Piso 8, Baño común', assignee: team[2], status: 'in-progress', priority: 'high', time: '1h 15min' },
            { id: 3, title: 'Luz fundida en pasillo', location: 'Piso 15, Pasillo norte', assignee: team[1], status: 'pending', priority: 'medium', time: '2h 30min' },
            { id: 4, title: 'Puerta de emergencia atascada', location: 'Piso 22, Escalera B', assignee: team[3], status: 'urgent', priority: 'high', time: '45 min' },
            { id: 5, title: 'Elevador A hace ruido extraño', location: 'Lobby principal', assignee: null, status: 'pending', priority: 'medium', time: '3h' },
            { id: 6, title: 'Gotera en techo', location: 'Piso 28, Oficina 2801', assignee: team[2], status: 'in-progress', priority: 'medium', time: '1h 45min' },
            { id: 7, title: 'Tomacorriente no funciona', location: 'Piso 5, Sala de juntas', assignee: team[1], status: 'in-progress', priority: 'low', time: '4h' },
            { id: 8, title: 'AC hace ruido', location: 'Piso 18, Oficina 1803', assignee: team[5], status: 'pending', priority: 'low', time: '5h' },
            { id: 9, title: 'Ventana no cierra bien', location: 'Piso 10, Oficina 1001', assignee: null, status: 'pending', priority: 'low', time: '6h' },
            { id: 10, title: 'Sensor de humo parpadea', location: 'Piso 25, Pasillo', assignee: null, status: 'urgent', priority: 'high', time: '15 min' }
        ];

        function generateFloorData() {
            const floors = [];
            for (let f = 30; f >= 1; f--) {
                const incidents = [];
                orders.forEach(order => {
                    const orderFloor = parseInt(order.location.match(/Piso (\d+)/)?.[1] || 0);
                    if (orderFloor === f) incidents.push({ title: order.title, status: order.status === 'urgent' ? 'urgent' : order.status === 'resolved' ? 'resolved' : 'pending', position: 10 + Math.random() * 75 });
                });
                if (Math.random() > 0.6) incidents.push({ title: 'Completado', status: 'resolved', position: 10 + Math.random() * 75 });
                team.forEach(member => { if (member.floor === f && member.online) incidents.push({ title: member.name, status: 'staff', position: 10 + Math.random() * 75, initials: member.initials }); });
                floors.push({ floor: f, incidents });
            }
            return floors;
        }

        const floorData = generateFloorData();
        let selectedFloor = null;

        function renderFloorMap() {
            const container = document.getElementById('floorList');
            container.innerHTML = '';
            floorData.forEach(floor => {
                const row = document.createElement('div');
                row.className = 'floor-row' + (selectedFloor === floor.floor ? ' selected' : '');
                row.onclick = () => selectFloor(floor.floor);
                const activeIncidents = floor.incidents.filter(i => i.status !== 'staff' && i.status !== 'resolved');
                const level = Math.min(4, activeIncidents.length);
                let dotsHtml = floor.incidents.map(inc => `<div class="floor-dot ${inc.status}" style="left: ${inc.position}%"><span class="floor-dot-tooltip">${inc.title}</span></div>`).join('');
                const urgent = floor.incidents.filter(i => i.status === 'urgent').length;
                const pending = floor.incidents.filter(i => i.status === 'pending').length;
                const resolved = floor.incidents.filter(i => i.status === 'resolved').length;
                const staff = floor.incidents.filter(i => i.status === 'staff').length;
                let summaryDots = '';
                for (let i = 0; i < Math.min(urgent, 3); i++) summaryDots += '<div class="mini-dot urgent"></div>';
                for (let i = 0; i < Math.min(pending, 3); i++) summaryDots += '<div class="mini-dot pending"></div>';
                for (let i = 0; i < Math.min(resolved, 2); i++) summaryDots += '<div class="mini-dot resolved"></div>';
                for (let i = 0; i < Math.min(staff, 2); i++) summaryDots += '<div class="mini-dot staff"></div>';
                row.innerHTML = `<div class="floor-label">P${floor.floor}</div><div class="floor-bar-container"><div class="floor-bar level-${level}">${dotsHtml}</div></div><div class="floor-summary">${summaryDots}</div>`;
                container.appendChild(row);
            });
        }

        function selectFloor(floorNum) {
            selectedFloor = floorNum;
            renderFloorMap();
            const floor = floorData.find(f => f.floor === floorNum);
            const panel = document.getElementById('floorDetailPanel');
            const incidents = floor.incidents.filter(i => i.status !== 'staff');
            const staffOnFloor = floor.incidents.filter(i => i.status === 'staff');
            const urgent = incidents.filter(i => i.status === 'urgent').length;
            const pending = incidents.filter(i => i.status === 'pending').length;
            const resolved = incidents.filter(i => i.status === 'resolved').length;
            const avgIncidents = floorData.reduce((sum, f) => sum + f.incidents.filter(i => i.status !== 'staff').length, 0) / 30;
            const hasInsight = incidents.length > avgIncidents * 2;
            let incidentsHtml = incidents.filter(i => i.status !== 'resolved').map(inc => `<div class="incident-card ${inc.status}"><div class="incident-title">${inc.title}</div><div class="incident-status">${inc.status === 'urgent' ? 'Urgente' : 'Pendiente'}</div></div>`).join('');
            const staffNames = staffOnFloor.length > 0 ? staffOnFloor.map(s => s.initials).join(', ') : 'Ninguno';
            panel.innerHTML = `<div class="detail-header"><div class="detail-floor-num">Piso ${floorNum}</div><div class="detail-subtitle">${incidents.length} incidentes · ${staffOnFloor.length} personal presente</div></div>${hasInsight ? `<div class="ai-insight"><div class="ai-insight-header"><svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>Insight IA</div><div class="ai-insight-text">Este piso tiene ${Math.round(incidents.length / avgIncidents)}x más incidentes que el promedio.</div></div>` : ''}<div class="detail-stats"><div class="detail-stat-row"><span class="detail-stat-label">Incidentes urgentes</span><span class="detail-stat-value urgent">${urgent}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Pendientes</span><span class="detail-stat-value pending">${pending}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Resueltos hoy</span><span class="detail-stat-value resolved">${resolved}</span></div><div class="detail-stat-row"><span class="detail-stat-label">Personal en piso</span><span class="detail-stat-value">${staffNames}</span></div></div>${incidentsHtml ? `<div class="detail-incidents"><h4 class="detail-section-title">Incidentes activos</h4>${incidentsHtml}</div>` : ''}`;
        }

        function renderOrders(filter = 'all') {
            const container = document.getElementById('ordersTableBody');
            const filtered = filter === 'all' ? orders : orders.filter(o => o.status === filter);
            container.innerHTML = filtered.map(order => `<div class="table-row" onclick="showOrderDetail(${order.id})"><div><div class="order-title">${order.title}</div><div class="order-location">${order.location}</div></div><div class="order-assignee">${order.assignee ? `<div class="assignee-avatar">${order.assignee.initials}</div><span>${order.assignee.name.split(' ')[0]}</span>` : '<span style="color:var(--text-muted)">Sin asignar</span>'}</div><div><span class="status-badge ${order.status}"><span class="status-dot"></span>${order.status === 'urgent' ? 'Urgente' : order.status === 'in-progress' ? 'En progreso' : 'Pendiente'}</span></div><div><span class="priority-indicator ${order.priority}"></span>${order.priority === 'high' ? 'Alta' : order.priority === 'medium' ? 'Media' : 'Baja'}</div><div class="time-ago">${order.time}</div></div>`).join('');
        }

        function renderTeam() {
            const container = document.getElementById('teamGrid');
            container.innerHTML = team.map(member => `<div class="team-card"><div class="team-card-header"><div class="team-avatar ${member.online ? 'online' : ''}">${member.initials}</div><div><div class="team-name">${member.name}</div><div class="team-role">${member.role}</div>${member.online ? `<div class="team-location"><svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>Piso ${member.floor}</div>` : '<div style="font-size:12px;color:var(--text-muted);margin-top:4px">Fuera de servicio</div>'}</div></div><div class="team-metrics"><div class="team-metric"><div class="team-metric-value">${member.completed}/${member.tasksToday}</div><div class="team-metric-label">Tareas</div></div><div class="team-metric"><div class="team-metric-value">${member.avgTime}</div><div class="team-metric-label">Promedio</div></div><div class="team-metric"><div class="team-metric-value">${member.online ? Math.round(member.completed / member.tasksToday * 100) || 0 : '—'}%</div><div class="team-metric-label">Eficiencia</div></div></div></div>`).join('');
        }

        const pageTitles = { dashboard: 'Dashboard', orders: 'Órdenes de Trabajo', tracking: 'Seguimiento en Vivo', team: 'Equipo', whatsapp: 'WhatsApp IA', predictive: 'IA Predictiva', compliance: 'Cumplimiento', assets: 'Activos QR', vendors: 'Proveedores', reports: 'Reportes', config: 'Configuración' };

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const view = item.dataset.view;
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                item.classList.add('active');
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById(view).classList.add('active');
                document.getElementById('pageTitle').textContent = pageTitles[view];
            });
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderOrders(btn.dataset.filter);
            });
        });

        function openModal() { document.getElementById('modalOverlay').classList.add('active'); }
        function closeModal() { document.getElementById('modalOverlay').classList.remove('active'); }

        function showOrderDetail(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            const statusLabels = { urgent: 'Urgente', 'in-progress': 'En Progreso', pending: 'Pendiente', resolved: 'Resuelto' };
            const priorityLabels = { high: 'Alta', medium: 'Media', low: 'Baja' };

            document.getElementById('drawerBody').innerHTML = `
                <div class="drawer-section">
                    <h3 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">${order.title}</h3>
                    <span class="status-badge ${order.status}"><span class="status-dot"></span>${statusLabels[order.status]}</span>
                </div>

                <div class="drawer-section">
                    <div class="drawer-section-title">Información</div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Ticket #</span>
                        <span class="drawer-info-value">${840 + order.id}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Ubicación</span>
                        <span class="drawer-info-value">${order.location}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Prioridad</span>
                        <span class="drawer-info-value"><span class="priority-indicator ${order.priority}"></span>${priorityLabels[order.priority]}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Asignado a</span>
                        <span class="drawer-info-value">${order.assignee ? order.assignee.name : 'Sin asignar'}</span>
                    </div>
                    <div class="drawer-info-row">
                        <span class="drawer-info-label">Tiempo abierto</span>
                        <span class="drawer-info-value">${order.time}</span>
                    </div>
                </div>

                <div class="drawer-section">
                    <div class="drawer-section-title">Historial</div>
                    <div class="drawer-timeline">
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Ticket creado</div>
                            <div class="timeline-event-time">Hoy, 14:32</div>
                        </div>
                        ${order.assignee ? `
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Asignado a ${order.assignee.name}</div>
                            <div class="timeline-event-time">Hoy, 14:35</div>
                        </div>
                        ` : ''}
                        ${order.status === 'in-progress' ? `
                        <div class="timeline-event completed">
                            <div class="timeline-event-title">Técnico en camino</div>
                            <div class="timeline-event-time">Hoy, 14:40</div>
                        </div>
                        <div class="timeline-event">
                            <div class="timeline-event-title">En progreso</div>
                            <div class="timeline-event-time">Ahora</div>
                        </div>
                        ` : ''}
                        ${order.status === 'pending' || order.status === 'urgent' ? `
                        <div class="timeline-event">
                            <div class="timeline-event-title">Esperando asignación</div>
                            <div class="timeline-event-time">Pendiente</div>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;

            document.getElementById('drawerOverlay').classList.add('active');
        }

        function closeDrawer() {
            document.getElementById('drawerOverlay').classList.remove('active');
        }
        function createOrder() { 
            showToast('Orden creada', 'Ticket #848 asignado a Miguel Hernández', 'success');
            closeModal();
        }
        document.getElementById('modalOverlay').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

        renderFloorMap();
        renderOrders();
        renderTeam();
        setTimeout(() => selectFloor(12), 100);

        // Update current time
        function updateTime() {
            const now = new Date();
            const options = { weekday: 'short', day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' };
            document.getElementById('currentTime').textContent = now.toLocaleDateString('es-MX', options);
        }
        updateTime();
        setInterval(updateTime, 60000);

        // Animated count-up for stats
        function animateValue(element, start, end, duration, suffix = '') {
            const range = end - start;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const current = start + (range * easeOut);
                
                if (suffix === 'h') {
                    element.textContent = current.toFixed(1) + suffix;
                } else if (suffix === '%') {
                    element.textContent = Math.round(current) + suffix;
                } else if (suffix === 'k') {
                    element.textContent = '$' + current.toFixed(1) + suffix;
                } else {
                    element.textContent = Math.round(current);
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            requestAnimationFrame(update);
        }

        // Trigger stat animations on page load
        setTimeout(() => {
            const stats = document.querySelectorAll('#dashboard .stat-value');
            if (stats[0]) animateValue(stats[0], 0, 12, 800);
            if (stats[1]) animateValue(stats[1], 0, 2.3, 800, 'h');
            if (stats[2]) animateValue(stats[2], 0, 98, 800, '%');
            if (stats[3]) animateValue(stats[3], 0, 47.2, 800, 'k');
        }, 200);
    </script>
</body>
</html>